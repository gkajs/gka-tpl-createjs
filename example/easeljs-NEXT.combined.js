/*!
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2010 gskinner.com, inc.
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/

this.createjs=this.createjs||{};createjs.extend=function(a,b){function c(){this.constructor=a}c.prototype=b.prototype;return(a.prototype=new c())};this.createjs=this.createjs||{};createjs.promote=function(d,a){var c=d.prototype,b=(Object.getPrototypeOf&&Object.getPrototypeOf(c))||c.__proto__;if(b){c[(a+="_")+"constructor"]=b.constructor;for(var e in b){if(c.hasOwnProperty(e)&&(typeof b[e]=="function")){c[a+e]=b[e]}}}return d};this.createjs=this.createjs||{};createjs.indexOf=function(d,c){for(var b=0,a=d.length;b<a;b++){if(c===d[b]){return b}}return -1};this.createjs=this.createjs||{};(function(){function a(){throw"UID cannot be instantiated"}a._nextID=0;a.get=function(){return a._nextID++};createjs.UID=a}());this.createjs=this.createjs||{};createjs.deprecate=function(b,a){return function(){var c="Deprecated property or method '"+a+"'. See docs for info.";console&&(console.warn?console.warn(c):console.log(c));return b&&b.apply(this,arguments)}};this.createjs=this.createjs||{};(function(){function a(e,d,c){this.type=e;this.target=null;this.currentTarget=null;this.eventPhase=0;this.bubbles=!!d;this.cancelable=!!c;this.timeStamp=(new Date()).getTime();this.defaultPrevented=false;this.propagationStopped=false;this.immediatePropagationStopped=false;this.removed=false}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&true};b.stopPropagation=function(){this.propagationStopped=true};b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=true};b.remove=function(){this.removed=true};b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)};b.set=function(c){for(var d in c){this[d]=c[d]}return this};b.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=a}());this.createjs=this.createjs||{};(function(){function a(){this._listeners=null;this._captureListeners=null}var b=a.prototype;a.initialize=function(c){c.addEventListener=b.addEventListener;c.on=b.on;c.removeEventListener=c.off=b.removeEventListener;c.removeAllEventListeners=b.removeAllEventListeners;c.hasEventListener=b.hasEventListener;c.dispatchEvent=b.dispatchEvent;c._dispatchEvent=b._dispatchEvent;c.willTrigger=b.willTrigger};b.addEventListener=function(e,g,f){var d;if(f){d=this._captureListeners=this._captureListeners||{}}else{d=this._listeners=this._listeners||{}}var c=d[e];if(c){this.removeEventListener(e,g,f)}c=d[e];if(!c){d[e]=[g]}else{c.push(g)}return g};b.on=function(e,h,d,c,g,f){if(h.handleEvent){d=d||h;h=h.handleEvent}d=d||this;return this.addEventListener(e,function(i){h.call(d,i,g);c&&i.remove()},f)};b.removeEventListener=function(g,j,h){var e=h?this._captureListeners:this._listeners;if(!e){return}var c=e[g];if(!c){return}for(var f=0,d=c.length;f<d;f++){if(c[f]==j){if(d==1){delete (e[g])}else{c.splice(f,1)}break}}};b.off=b.removeEventListener;b.removeAllEventListeners=function(c){if(!c){this._listeners=this._captureListeners=null}else{if(this._listeners){delete (this._listeners[c])}if(this._captureListeners){delete (this._captureListeners[c])}}};b.dispatchEvent=function(k,g,d){if(typeof k=="string"){var c=this._listeners;if(!g&&(!c||!c[k])){return true}k=new createjs.Event(k,g,d)}else{if(k.target&&k.clone){k=k.clone()}}try{k.target=this}catch(m){}if(!k.bubbles||!this.parent){this._dispatchEvent(k,2)}else{var n=this,j=[n];while(n.parent){j.push(n=n.parent)}var h,f=j.length;for(h=f-1;h>=0&&!k.propagationStopped;h--){j[h]._dispatchEvent(k,1+(h==0))}for(h=1;h<f&&!k.propagationStopped;h++){j[h]._dispatchEvent(k,3)}}return !k.defaultPrevented};b.hasEventListener=function(e){var d=this._listeners,c=this._captureListeners;return !!((d&&d[e])||(c&&c[e]))};b.willTrigger=function(c){var d=this;while(d){if(d.hasEventListener(c)){return true}d=d.parent}return false};b.toString=function(){return"[EventDispatcher]"};b._dispatchEvent=function(j,g){var d,c,f=(g<=2)?this._captureListeners:this._listeners;if(j&&f&&(c=f[j.type])&&(d=c.length)){try{j.currentTarget=this}catch(k){}try{j.eventPhase=g|0}catch(k){}j.removed=false;c=c.slice();for(var h=0;h<d&&!j.immediatePropagationStopped;h++){var m=c[h];if(m.handleEvent){m.handleEvent(j)}else{m(j)}if(j.removed){this.off(j.type,m,g==1);j.removed=false}}}if(g===2){this._dispatchEvent(j,2.1)}};createjs.EventDispatcher=a}());this.createjs=this.createjs||{};(function(){function d(){throw"Ticker cannot be instantiated."}d.RAF_SYNCHED="synched";d.RAF="raf";d.TIMEOUT="timeout";d.timingMode=null;d.maxDelta=0;d.paused=false;d.removeEventListener=null;d.removeAllEventListeners=null;d.dispatchEvent=null;d.hasEventListener=null;d._listeners=null;createjs.EventDispatcher.initialize(d);d._addEventListener=d.addEventListener;d.addEventListener=function(){!d._inited&&d.init();return d._addEventListener.apply(d,arguments)};d._inited=false;d._startTime=0;d._pausedTime=0;d._ticks=0;d._pausedTicks=0;d._interval=50;d._lastTime=0;d._times=null;d._tickTimes=null;d._timerId=null;d._raf=true;d._setInterval=function(e){d._interval=e;if(!d._inited){return}d._setupTick()};d.setInterval=createjs.deprecate(d._setInterval,"Ticker.setInterval");d._getInterval=function(){return d._interval};d.getInterval=createjs.deprecate(d._getInterval,"Ticker.getInterval");d._setFPS=function(e){d._setInterval(1000/e)};d.setFPS=createjs.deprecate(d._setFPS,"Ticker.setFPS");d._getFPS=function(){return 1000/d._interval};d.getFPS=createjs.deprecate(d._getFPS,"Ticker.getFPS");try{Object.defineProperties(d,{interval:{get:d._getInterval,set:d._setInterval},framerate:{get:d._getFPS,set:d._setFPS}})}catch(c){console.log(c)}d.init=function(){if(d._inited){return}d._inited=true;d._times=[];d._tickTimes=[];d._startTime=d._getTime();d._times.push(d._lastTime=0);d.interval=d._interval};d.reset=function(){if(d._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(d._timerId)}else{clearTimeout(d._timerId)}d.removeAllEventListeners("tick");d._timerId=d._times=d._tickTimes=null;d._startTime=d._lastTime=d._ticks=d._pausedTime=0;d._inited=false};d.getMeasuredTickTime=function(g){var e=0,h=d._tickTimes;if(!h||h.length<1){return -1}g=Math.min(h.length,g||(d._getFPS()|0));for(var f=0;f<g;f++){e+=h[f]}return e/g};d.getMeasuredFPS=function(e){var f=d._times;if(!f||f.length<2){return -1}e=Math.min(f.length-1,e||(d._getFPS()|0));return 1000/((f[0]-f[e])/e)};d.getTime=function(e){return d._startTime?d._getTime()-(e?d._pausedTime:0):-1};d.getEventTime=function(e){return d._startTime?(d._lastTime||d._startTime)-(e?d._pausedTime:0):-1};d.getTicks=function(e){return d._ticks-(e?d._pausedTicks:0)};d._handleSynch=function(){d._timerId=null;d._setupTick();if(d._getTime()-d._lastTime>=(d._interval-1)*0.97){d._tick()}};d._handleRAF=function(){d._timerId=null;d._setupTick();d._tick()};d._handleTimeout=function(){d._timerId=null;d._setupTick();d._tick()};d._setupTick=function(){if(d._timerId!=null){return}var g=d.timingMode;if(g==d.RAF_SYNCHED||g==d.RAF){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e){d._timerId=e(g==d.RAF?d._handleRAF:d._handleSynch);d._raf=true;return}}d._raf=false;d._timerId=setTimeout(d._handleTimeout,d._interval)};d._tick=function(){var f=d.paused;var i=d._getTime();var g=i-d._lastTime;d._lastTime=i;d._ticks++;if(f){d._pausedTicks++;d._pausedTime+=g}if(d.hasEventListener("tick")){var h=new createjs.Event("tick");var e=d.maxDelta;h.delta=(e&&g>e)?e:g;h.paused=f;h.time=i;h.runTime=i-d._pausedTime;d.dispatchEvent(h)}d._tickTimes.unshift(d._getTime()-i);while(d._tickTimes.length>100){d._tickTimes.pop()}d._times.unshift(i);while(d._times.length>100){d._times.pop()}};var a=window,b=a.performance.now||a.performance.mozNow||a.performance.msNow||a.performance.oNow||a.performance.webkitNow;d._getTime=function(){return((b&&b.call(a.performance))||(new Date().getTime()))-d._startTime};createjs.Ticker=d}());this.createjs=this.createjs||{};(function(){function a(c){this.readyState=c.readyState;this._video=c;this._canvas=null;this._lastTime=-1;if(this.readyState<2){c.addEventListener("canplaythrough",this._videoReady.bind(this))}}var b=a.prototype;b.getImage=function(){if(this.readyState<2){return}var d=this._canvas,e=this._video;if(!d){d=this._canvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");d.width=e.videoWidth;d.height=e.videoHeight}if(e.readyState>=2&&e.currentTime!==this._lastTime){var c=d.getContext("2d");c.clearRect(0,0,d.width,d.height);c.drawImage(e,0,0,d.width,d.height);this._lastTime=e.currentTime}return d};b._videoReady=function(){this.readyState=2};createjs.VideoBuffer=a}());this.createjs=this.createjs||{};(function(){function a(n,i,f,j,l,g,h,k,e,d,m){this.Event_constructor(n,i,f);this.stageX=j;this.stageY=l;this.rawX=(e==null)?j:e;this.rawY=(d==null)?l:d;this.nativeEvent=g;this.pointerID=h;this.primary=!!k;this.relatedTarget=m}var c=createjs.extend(a,createjs.Event);c._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x};c._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y};c._get_isTouch=function(){return this.pointerID!==-1};try{Object.defineProperties(c,{localX:{get:c._get_localX},localY:{get:c._get_localY},isTouch:{get:c._get_isTouch}})}catch(b){}c.clone=function(){return new a(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)};c.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};createjs.MouseEvent=createjs.promote(a,"Event")}());this.createjs=this.createjs||{};(function(){function b(h,f,j,i,g,e){this.setValues(h,f,j,i,g,e)}var a=b.prototype;b.DEG_TO_RAD=Math.PI/180;b.identity=null;a.setValues=function(h,f,j,i,g,e){this.a=(h==null)?1:h;this.b=f||0;this.c=j||0;this.d=(i==null)?1:i;this.tx=g||0;this.ty=e||0;return this};a.append=function(m,l,k,j,i,g){var f=this.a;var n=this.b;var h=this.c;var e=this.d;if(m!=1||l!=0||k!=0||j!=1){this.a=f*m+h*l;this.b=n*m+e*l;this.c=f*k+h*j;this.d=n*k+e*j}this.tx=f*i+h*g+this.tx;this.ty=n*i+e*g+this.ty;return this};a.prepend=function(m,l,k,j,h,g){var e=this.a;var i=this.c;var f=this.tx;this.a=m*e+k*this.b;this.b=l*e+j*this.b;this.c=m*i+k*this.d;this.d=l*i+j*this.d;this.tx=m*f+k*this.ty+h;this.ty=l*f+j*this.ty+g;return this};a.appendMatrix=function(c){return this.append(c.a,c.b,c.c,c.d,c.tx,c.ty)};a.prependMatrix=function(c){return this.prepend(c.a,c.b,c.c,c.d,c.tx,c.ty)};a.appendTransform=function(h,g,l,n,j,k,i,e,d){if(j%360){var c=j*b.DEG_TO_RAD;var m=Math.cos(c);var f=Math.sin(c)}else{m=1;f=0}if(k||i){k*=b.DEG_TO_RAD;i*=b.DEG_TO_RAD;this.append(Math.cos(i),Math.sin(i),-Math.sin(k),Math.cos(k),h,g);this.append(m*l,f*l,-f*n,m*n,0,0)}else{this.append(m*l,f*l,-f*n,m*n,h,g)}if(e||d){this.tx-=e*this.a+d*this.c;this.ty-=e*this.b+d*this.d}return this};a.prependTransform=function(h,g,l,n,j,k,i,e,d){if(j%360){var c=j*b.DEG_TO_RAD;var m=Math.cos(c);var f=Math.sin(c)}else{m=1;f=0}if(e||d){this.tx-=e;this.ty-=d}if(k||i){k*=b.DEG_TO_RAD;i*=b.DEG_TO_RAD;this.prepend(m*l,f*l,-f*n,m*n,0,0);this.prepend(Math.cos(i),Math.sin(i),-Math.sin(k),Math.cos(k),h,g)}else{this.prepend(m*l,f*l,-f*n,m*n,h,g)}return this};a.rotate=function(g){g=g*b.DEG_TO_RAD;var f=Math.cos(g);var d=Math.sin(g);var c=this.a;var e=this.b;this.a=c*f+this.c*d;this.b=e*f+this.d*d;this.c=-c*d+this.c*f;this.d=-e*d+this.d*f;return this};a.skew=function(d,c){d=d*b.DEG_TO_RAD;c=c*b.DEG_TO_RAD;this.append(Math.cos(c),Math.sin(c),-Math.sin(d),Math.cos(d),0,0);return this};a.scale=function(c,d){this.a*=c;this.b*=c;this.c*=d;this.d*=d;return this};a.translate=function(c,d){this.tx+=this.a*c+this.c*d;this.ty+=this.b*c+this.d*d;return this};a.identity=function(){this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;return this};a.invert=function(){var d=this.a;var e=this.b;var f=this.c;var g=this.d;var c=this.tx;var h=d*g-e*f;this.a=g/h;this.b=-e/h;this.c=-f/h;this.d=d/h;this.tx=(f*this.ty-g*c)/h;this.ty=-(d*this.ty-e*c)/h;return this};a.isIdentity=function(){return this.tx===0&&this.ty===0&&this.a===1&&this.b===0&&this.c===0&&this.d===1};a.equals=function(c){return this.tx===c.tx&&this.ty===c.ty&&this.a===c.a&&this.b===c.b&&this.c===c.c&&this.d===c.d};a.transformPoint=function(c,e,d){d=d||{};d.x=c*this.a+e*this.c+this.tx;d.y=c*this.b+e*this.d+this.ty;return d};a.decompose=function(f){if(f==null){f={}}f.x=this.tx;f.y=this.ty;f.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);f.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var d=Math.atan2(-this.c,this.d);var c=Math.atan2(this.b,this.a);var e=Math.abs(1-d/c);if(e<0.00001){f.rotation=c/b.DEG_TO_RAD;if(this.a<0&&this.d>=0){f.rotation+=(f.rotation<=0)?180:-180}f.skewX=f.skewY=0}else{f.skewX=d/b.DEG_TO_RAD;f.skewY=c/b.DEG_TO_RAD}return f};a.copy=function(c){return this.setValues(c.a,c.b,c.c,c.d,c.tx,c.ty)};a.clone=function(){return new b(this.a,this.b,this.c,this.d,this.tx,this.ty)};a.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};b.identity=new b();createjs.Matrix2D=b}());this.createjs=this.createjs||{};(function(){function a(g,f,e,d,c){this.setValues(g,f,e,d,c)}var b=a.prototype;b.setValues=function(g,f,e,d,c){this.visible=g==null?true:!!g;this.alpha=f==null?1:f;this.shadow=e;this.compositeOperation=d;this.matrix=c||(this.matrix&&this.matrix.identity())||new createjs.Matrix2D();return this};b.append=function(g,f,e,d,c){this.alpha*=f;this.shadow=e||this.shadow;this.compositeOperation=d||this.compositeOperation;this.visible=this.visible&&g;c&&this.matrix.appendMatrix(c);return this};b.prepend=function(g,f,e,d,c){this.alpha*=f;this.shadow=this.shadow||e;this.compositeOperation=this.compositeOperation||d;this.visible=this.visible&&g;c&&this.matrix.prependMatrix(c);return this};b.identity=function(){this.visible=true;this.alpha=1;this.shadow=this.compositeOperation=null;this.matrix.identity();return this};b.clone=function(){return new a(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())};createjs.DisplayProps=a})();this.createjs=this.createjs||{};(function(){function a(c,d){this.setValues(c,d)}var b=a.prototype;b.setValues=function(c,d){this.x=c||0;this.y=d||0;return this};b.copy=function(c){this.x=c.x;this.y=c.y;return this};b.clone=function(){return new a(this.x,this.y)};b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};createjs.Point=a}());this.createjs=this.createjs||{};(function(){function a(c,f,d,e){this.setValues(c,f,d,e)}var b=a.prototype;b.setValues=function(c,f,d,e){this.x=c||0;this.y=f||0;this.width=d||0;this.height=e||0;return this};b.extend=function(c,f,d,e){d=d||0;e=e||0;if(c+d>this.x+this.width){this.width=c+d-this.x}if(f+e>this.y+this.height){this.height=f+e-this.y}if(c<this.x){this.width+=this.x-c;this.x=c}if(f<this.y){this.height+=this.y-f;this.y=f}return this};b.pad=function(f,e,d,c){this.x-=e;this.y-=f;this.width+=e+c;this.height+=f+d;return this};b.copy=function(c){return this.setValues(c.x,c.y,c.width,c.height)};b.contains=function(c,f,d,e){d=d||0;e=e||0;return(c>=this.x&&c+d<=this.x+this.width&&f>=this.y&&f+e<=this.y+this.height)};b.union=function(c){return this.clone().extend(c.x,c.y,c.width,c.height)};b.intersection=function(g){var d=g.x,f=g.y,c=d+g.width,e=f+g.height;if(this.x>d){d=this.x}if(this.y>f){f=this.y}if(this.x+this.width<c){c=this.x+this.width}if(this.y+this.height<e){e=this.y+this.height}return(c<=d||e<=f)?null:new a(d,f,c-d,e-f)};b.intersects=function(c){return(c.x<=this.x+this.width&&this.x<=c.x+c.width&&c.y<=this.y+this.height&&this.y<=c.y+c.height)};b.isEmpty=function(){return this.width<=0||this.height<=0};b.clone=function(){return new a(this.x,this.y,this.width,this.height)};b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};createjs.Rectangle=a}());this.createjs=this.createjs||{};(function(){function a(j,h,d,e,g,i,f){if(!j.addEventListener){return}this.target=j;this.overLabel=d==null?"over":d;this.outLabel=h==null?"out":h;this.downLabel=e==null?"down":e;this.play=g;this._isPressed=false;this._isOver=false;this._enabled=false;j.mouseChildren=false;this.enabled=true;this.handleEvent({});if(i){if(f){i.actionsEnabled=false;i.gotoAndStop&&i.gotoAndStop(f)}j.hitArea=i}}var c=a.prototype;c._setEnabled=function(d){if(d==this._enabled){return}var e=this.target;this._enabled=d;if(d){e.cursor="pointer";e.addEventListener("rollover",this);e.addEventListener("rollout",this);e.addEventListener("mousedown",this);e.addEventListener("pressup",this);if(e._reset){e.__reset=e._reset;e._reset=this._reset}}else{e.cursor=null;e.removeEventListener("rollover",this);e.removeEventListener("rollout",this);e.removeEventListener("mousedown",this);e.removeEventListener("pressup",this);if(e.__reset){e._reset=e.__reset;delete (e.__reset)}}};c.setEnabled=createjs.deprecate(c._setEnabled,"ButtonHelper.setEnabled");c._getEnabled=function(){return this._enabled};c.getEnabled=createjs.deprecate(c._getEnabled,"ButtonHelper.getEnabled");try{Object.defineProperties(c,{enabled:{get:c._getEnabled,set:c._setEnabled}})}catch(b){}c.toString=function(){return"[ButtonHelper]"};c.handleEvent=function(d){var e,f=this.target,g=d.type;if(g=="mousedown"){this._isPressed=true;e=this.downLabel}else{if(g=="pressup"){this._isPressed=false;e=this._isOver?this.overLabel:this.outLabel}else{if(g=="rollover"){this._isOver=true;e=this._isPressed?this.downLabel:this.overLabel}else{this._isOver=false;e=this._isPressed?this.overLabel:this.outLabel}}}if(this.play){f.gotoAndPlay&&f.gotoAndPlay(e)}else{f.gotoAndStop&&f.gotoAndStop(e)}};c._reset=function(){var d=this.paused;this.__reset();this.paused=d};createjs.ButtonHelper=a}());this.createjs=this.createjs||{};(function(){function b(c,d,e,f){this.color=c||"black";this.offsetX=d||0;this.offsetY=e||0;this.blur=f||0}var a=b.prototype;b.identity=new b("transparent",0,0,0);a.toString=function(){return"[Shadow]"};a.clone=function(){return new b(this.color,this.offsetX,this.offsetY,this.blur)};createjs.Shadow=b}());this.createjs=this.createjs||{};(function(){function a(d){this.EventDispatcher_constructor();this.complete=true;this.framerate=0;this._animations=null;this._frames=null;this._images=null;this._data=null;this._loadCount=0;this._frameHeight=0;this._frameWidth=0;this._numFrames=0;this._regX=0;this._regY=0;this._spacing=0;this._margin=0;this._parseData(d)}var c=createjs.extend(a,createjs.EventDispatcher);c._getAnimations=function(){return this._animations.slice()};c.getAnimations=createjs.deprecate(c._getAnimations,"SpriteSheet.getAnimations");try{Object.defineProperties(c,{animations:{get:c._getAnimations}})}catch(b){}c.getNumFrames=function(e){if(e==null){return this._frames?this._frames.length:this._numFrames||0}else{var d=this._data[e];if(d==null){return 0}else{return d.frames.length}}};c.getAnimation=function(d){return this._data[d]};c.getFrame=function(d){var e;if(this._frames&&(e=this._frames[d])){return e}return null};c.getFrameBounds=function(e,d){var f=this.getFrame(e);return f?(d||new createjs.Rectangle()).setValues(-f.regX,-f.regY,f.rect.width,f.rect.height):null};c.toString=function(){return"[SpriteSheet]"};c.clone=function(){throw ("SpriteSheet cannot be cloned.")};c._parseData=function(p){var n,h,g,r;if(p==null){return}this.framerate=p.framerate||0;if(p.images&&(h=p.images.length)>0){r=this._images=[];for(n=0;n<h;n++){var m=p.images[n];if(typeof m=="string"){var d=m;m=document.createElement("img");m.src=d}r.push(m);if(!m.getContext&&!m.naturalWidth){this._loadCount++;this.complete=false;(function(l,i){m.onload=function(){l._handleImageLoad(i)}})(this,d);(function(l,i){m.onerror=function(){l._handleImageError(i)}})(this,d)}}}if(p.frames==null){}else{if(Array.isArray(p.frames)){this._frames=[];r=p.frames;for(n=0,h=r.length;n<h;n++){var q=r[n];this._frames.push({image:this._images[q[4]?q[4]:0],rect:new createjs.Rectangle(q[0],q[1],q[2],q[3]),regX:q[5]||0,regY:q[6]||0})}}else{g=p.frames;this._frameWidth=g.width;this._frameHeight=g.height;this._regX=g.regX||0;this._regY=g.regY||0;this._spacing=g.spacing||0;this._margin=g.margin||0;this._numFrames=g.count;if(this._loadCount==0){this._calculateFrames()}}}this._animations=[];if((g=p.animations)!=null){this._data={};var f;for(f in g){var j={name:f};var k=g[f];if(typeof k=="number"){r=j.frames=[k]}else{if(Array.isArray(k)){if(k.length==1){j.frames=[k[0]]}else{j.speed=k[3];j.next=k[2];r=j.frames=[];for(n=k[0];n<=k[1];n++){r.push(n)}}}else{j.speed=k.speed;j.next=k.next;var e=k.frames;r=j.frames=(typeof e=="number")?[e]:e.slice(0)}}if(j.next===true||j.next===undefined){j.next=f}if(j.next===false||(r.length<2&&j.next==f)){j.next=null}if(!j.speed){j.speed=1}this._animations.push(f);this._data[f]=j}}};c._handleImageLoad=function(d){if(--this._loadCount==0){this._calculateFrames();this.complete=true;this.dispatchEvent("complete")}};c._handleImageError=function(d){var e=new createjs.Event("error");e.src=d;this.dispatchEvent(e);if(--this._loadCount==0){this.dispatchEvent("complete")}};c._calculateFrames=function(){if(this._frames||this._frameWidth==0){return}this._frames=[];var e=this._numFrames||100000;var m=0,q=this._frameWidth,k=this._frameHeight;var d=this._spacing,g=this._margin;imgLoop:for(var j=0,l=this._images;j<l.length;j++){var h=l[j],n=(h.width||h.naturalWidth),f=(h.height||h.naturalHeight);var o=g;while(o<=f-g-k){var p=g;while(p<=n-g-q){if(m>=e){break imgLoop}m++;this._frames.push({image:h,rect:new createjs.Rectangle(p,o,q,k),regX:this._regX,regY:this._regY});p+=q+d}o+=k+d}}this._numFrames=m};createjs.SpriteSheet=createjs.promote(a,"EventDispatcher")}());this.createjs=this.createjs||{};(function(){function a(){this.command=null;this._stroke=null;this._strokeStyle=null;this._oldStrokeStyle=null;this._strokeDash=null;this._oldStrokeDash=null;this._strokeIgnoreScale=false;this._fill=null;this._instructions=[];this._commitIndex=0;this._activeInstructions=[];this._dirty=false;this._storeIndex=0;this.clear()}var f=a.prototype;var c=a;a.getRGB=function(i,h,e,j){if(i!=null&&e==null){j=h;e=i&255;h=i>>8&255;i=i>>16&255}if(j==null){return"rgb("+i+","+h+","+e+")"}else{return"rgba("+i+","+h+","+e+","+j+")"}};a.getHSL=function(g,e,i,h){if(h==null){return"hsl("+(g%360)+","+e+"%,"+i+"%)"}else{return"hsla("+(g%360)+","+e+"%,"+i+"%,"+h+")"}};a.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"0":52,"1":53,"2":54,"3":55,"4":56,"5":57,"6":58,"7":59,"8":60,"9":61,"+":62,"/":63};a.STROKE_CAPS_MAP=["butt","round","square"];a.STROKE_JOINTS_MAP=["miter","round","bevel"];var b=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"));if(b.getContext){a._ctx=b.getContext("2d");b.width=b.height=1}f._getInstructions=function(){this._updateInstructions();return this._instructions};f.getInstructions=createjs.deprecate(f._getInstructions,"Graphics.getInstructions");try{Object.defineProperties(f,{instructions:{get:f._getInstructions}})}catch(d){}f.isEmpty=function(){return !(this._instructions.length||this._activeInstructions.length)};f.draw=function(h,k){this._updateInstructions();var g=this._instructions;for(var j=this._storeIndex,e=g.length;j<e;j++){g[j].exec(h,k)}};f.drawAsPath=function(h){this._updateInstructions();var g,k=this._instructions;for(var j=this._storeIndex,e=k.length;j<e;j++){if((g=k[j]).path!==false){g.exec(h)}}};f.moveTo=function(e,g){return this.append(new c.MoveTo(e,g),true)};f.lineTo=function(e,g){return this.append(new c.LineTo(e,g))};f.arcTo=function(g,i,e,h,j){return this.append(new c.ArcTo(g,i,e,h,j))};f.arc=function(e,k,j,h,g,i){return this.append(new c.Arc(e,k,j,h,g,i))};f.quadraticCurveTo=function(h,g,e,i){return this.append(new c.QuadraticCurveTo(h,g,e,i))};f.bezierCurveTo=function(h,g,j,i,e,k){return this.append(new c.BezierCurveTo(h,g,j,i,e,k))};f.rect=function(e,j,g,i){return this.append(new c.Rect(e,j,g,i))};f.closePath=function(){return this._activeInstructions.length?this.append(new c.ClosePath()):this};f.clear=function(){this._instructions.length=this._activeInstructions.length=this._commitIndex=0;this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null;this._dirty=this._strokeIgnoreScale=false;return this};f.beginFill=function(e){return this._setFill(e?new c.Fill(e):null)};f.beginLinearGradientFill=function(k,e,h,j,g,i){return this._setFill(new c.Fill().linearGradient(k,e,h,j,g,i))};f.beginRadialGradientFill=function(m,e,j,l,i,h,k,g){return this._setFill(new c.Fill().radialGradient(m,e,j,l,i,h,k,g))};f.beginBitmapFill=function(h,g,e){return this._setFill(new c.Fill(null,e).bitmap(h,g))};f.endFill=function(){return this.beginFill()};f.setStrokeStyle=function(e,i,j,h,g){this._updateInstructions(true);this._strokeStyle=this.command=new c.StrokeStyle(e,i,j,h,g);if(this._stroke){this._stroke.ignoreScale=g}this._strokeIgnoreScale=g;return this};f.setStrokeDash=function(e,g){this._updateInstructions(true);this._strokeDash=this.command=new c.StrokeDash(e,g);return this};f.beginStroke=function(e){return this._setStroke(e?new c.Stroke(e):null)};f.beginLinearGradientStroke=function(k,e,h,j,g,i){return this._setStroke(new c.Stroke().linearGradient(k,e,h,j,g,i))};f.beginRadialGradientStroke=function(m,e,j,l,i,h,k,g){return this._setStroke(new c.Stroke().radialGradient(m,e,j,l,i,h,k,g))};f.beginBitmapStroke=function(g,e){return this._setStroke(new c.Stroke().bitmap(g,e))};f.endStroke=function(){return this.beginStroke()};f.curveTo=f.quadraticCurveTo;f.drawRect=f.rect;f.drawRoundRect=function(e,k,g,i,j){return this.drawRoundRectComplex(e,k,g,i,j,j,j,j)};f.drawRoundRectComplex=function(e,n,i,k,m,j,l,g){return this.append(new c.RoundRect(e,n,i,k,m,j,l,g))};f.drawCircle=function(e,h,g){return this.append(new c.Circle(e,h,g))};f.drawEllipse=function(e,j,g,i){return this.append(new c.Ellipse(e,j,g,i))};f.drawPolyStar=function(e,k,h,g,i,j){return this.append(new c.PolyStar(e,k,h,g,i,j))};f.append=function(g,e){this._activeInstructions.push(g);this.command=g;if(!e){this._dirty=true}return this};f.decodePath=function(t){var e=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath];var g=[2,2,4,6,0];var v=0,u=t.length;var s=[];var k=0,j=0;var m=a.BASE_64;while(v<u){var B=t.charAt(v);var r=m[B];var o=r>>3;var z=e[o];if(!z||(r&3)){throw ("bad path data (@"+v+"): "+B)}var w=g[o];if(!o){k=j=0}s.length=0;v++;var A=(r>>2&1)+2;for(var q=0;q<w;q++){var h=m[t.charAt(v)];var C=(h>>5)?-1:1;h=((h&31)<<6)|(m[t.charAt(v+1)]);if(A==3){h=(h<<6)|(m[t.charAt(v+2)])}h=C*h/10;if(q%2){k=(h+=k)}else{j=(h+=j)}s[q]=h;v+=A}z.apply(this,s)}return this};f.store=function(){this._updateInstructions(true);this._storeIndex=this._instructions.length;return this};f.unstore=function(){this._storeIndex=0;return this};f.clone=function(){var e=new a();e.command=this.command;e._stroke=this._stroke;e._strokeStyle=this._strokeStyle;e._strokeDash=this._strokeDash;e._strokeIgnoreScale=this._strokeIgnoreScale;e._fill=this._fill;e._instructions=this._instructions.slice();e._commitIndex=this._commitIndex;e._activeInstructions=this._activeInstructions.slice();e._dirty=this._dirty;e._storeIndex=this._storeIndex;return e};f.toString=function(){return"[Graphics]"};f.mt=f.moveTo;f.lt=f.lineTo;f.at=f.arcTo;f.bt=f.bezierCurveTo;f.qt=f.quadraticCurveTo;f.a=f.arc;f.r=f.rect;f.cp=f.closePath;f.c=f.clear;f.f=f.beginFill;f.lf=f.beginLinearGradientFill;f.rf=f.beginRadialGradientFill;f.bf=f.beginBitmapFill;f.ef=f.endFill;f.ss=f.setStrokeStyle;f.sd=f.setStrokeDash;f.s=f.beginStroke;f.ls=f.beginLinearGradientStroke;f.rs=f.beginRadialGradientStroke;f.bs=f.beginBitmapStroke;f.es=f.endStroke;f.dr=f.drawRect;f.rr=f.drawRoundRect;f.rc=f.drawRoundRectComplex;f.dc=f.drawCircle;f.de=f.drawEllipse;f.dp=f.drawPolyStar;f.p=f.decodePath;f._updateInstructions=function(m){var h=this._instructions,n=this._activeInstructions,g=this._commitIndex;if(this._dirty&&n.length){h.length=g;h.push(a.beginCmd);var e=n.length,k=h.length;h.length=k+e;for(var j=0;j<e;j++){h[j+k]=n[j]}if(this._fill){h.push(this._fill)}if(this._stroke){if(this._strokeDash!==this._oldStrokeDash){h.push(this._strokeDash)}if(this._strokeStyle!==this._oldStrokeStyle){h.push(this._strokeStyle)}if(m){this._oldStrokeStyle=this._strokeStyle;this._oldStrokeDash=this._strokeDash}h.push(this._stroke)}this._dirty=false}if(m){n.length=0;this._commitIndex=h.length}};f._setFill=function(e){this._updateInstructions(true);this.command=this._fill=e;return this};f._setStroke=function(e){this._updateInstructions(true);if(this.command=this._stroke=e){e.ignoreScale=this._strokeIgnoreScale}return this};(c.LineTo=function(e,g){this.x=e;this.y=g}).prototype.exec=function(e){e.lineTo(this.x,this.y)};(c.MoveTo=function(e,g){this.x=e;this.y=g}).prototype.exec=function(e){e.moveTo(this.x,this.y)};(c.ArcTo=function(g,i,e,h,j){this.x1=g;this.y1=i;this.x2=e;this.y2=h;this.radius=j}).prototype.exec=function(e){e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)};(c.Arc=function(e,k,j,h,g,i){this.x=e;this.y=k;this.radius=j;this.startAngle=h;this.endAngle=g;this.anticlockwise=!!i}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)};(c.QuadraticCurveTo=function(h,g,e,i){this.cpx=h;this.cpy=g;this.x=e;this.y=i}).prototype.exec=function(e){e.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)};(c.BezierCurveTo=function(h,g,j,i,e,k){this.cp1x=h;this.cp1y=g;this.cp2x=j;this.cp2y=i;this.x=e;this.y=k}).prototype.exec=function(e){e.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)};(c.Rect=function(e,j,g,i){this.x=e;this.y=j;this.w=g;this.h=i}).prototype.exec=function(e){e.rect(this.x,this.y,this.w,this.h)};(c.ClosePath=function(){}).prototype.exec=function(e){e.closePath()};(c.BeginPath=function(){}).prototype.exec=function(e){e.beginPath()};f=(c.Fill=function(g,e){this.style=g;this.matrix=e}).prototype;f.exec=function(e){if(!this.style){return}e.fillStyle=this.style;var g=this.matrix;if(g){e.save();e.transform(g.a,g.b,g.c,g.d,g.tx,g.ty)}e.fill();if(g){e.restore()}};f.linearGradient=function(n,j,g,q,e,p){var h=this.style=a._ctx.createLinearGradient(g,q,e,p);for(var m=0,k=n.length;m<k;m++){h.addColorStop(j[m],n[m])}h.props={colors:n,ratios:j,x0:g,y0:q,x1:e,y1:p,type:"linear"};return this};f.radialGradient=function(q,k,h,s,m,e,r,j){var g=this.style=a._ctx.createRadialGradient(h,s,m,e,r,j);for(var p=0,n=q.length;p<n;p++){g.addColorStop(k[p],q[p])}g.props={colors:q,ratios:k,x0:h,y0:s,r0:m,x1:e,y1:r,r1:j,type:"radial"};return this};f.bitmap=function(g,e){if(g.naturalWidth||g.getContext||g.readyState>=2){var h=this.style=a._ctx.createPattern(g,e||"");h.props={image:g,repetition:e,type:"bitmap"}}return this};f.path=false;f=(c.Stroke=function(g,e){this.style=g;this.ignoreScale=e}).prototype;f.exec=function(e){if(!this.style){return}e.strokeStyle=this.style;if(this.ignoreScale){e.save();e.setTransform(1,0,0,1,0,0)}e.stroke();if(this.ignoreScale){e.restore()}};f.linearGradient=c.Fill.prototype.linearGradient;f.radialGradient=c.Fill.prototype.radialGradient;f.bitmap=c.Fill.prototype.bitmap;f.path=false;f=(c.StrokeStyle=function(g,i,j,h,e){this.width=g;this.caps=i;this.joints=j;this.miterLimit=h;this.ignoreScale=e}).prototype;f.exec=function(e){e.lineWidth=(this.width==null?"1":this.width);e.lineCap=(this.caps==null?"butt":(isNaN(this.caps)?this.caps:a.STROKE_CAPS_MAP[this.caps]));e.lineJoin=(this.joints==null?"miter":(isNaN(this.joints)?this.joints:a.STROKE_JOINTS_MAP[this.joints]));e.miterLimit=(this.miterLimit==null?"10":this.miterLimit);e.ignoreScale=(this.ignoreScale==null?false:this.ignoreScale)};f.path=false;(c.StrokeDash=function(e,g){this.segments=e;this.offset=g||0}).prototype.exec=function(e){if(e.setLineDash){e.setLineDash(this.segments||c.StrokeDash.EMPTY_SEGMENTS);e.lineDashOffset=this.offset||0}};c.StrokeDash.EMPTY_SEGMENTS=[];(c.RoundRect=function(e,n,i,k,m,j,l,g){this.x=e;this.y=n;this.w=i;this.h=k;this.radiusTL=m;this.radiusTR=j;this.radiusBR=l;this.radiusBL=g}).prototype.exec=function(s){var n=(q<l?q:l)/2;var e=0,r=0,g=0,k=0;var p=this.x,o=this.y,q=this.w,l=this.h;var j=this.radiusTL,t=this.radiusTR,i=this.radiusBR,m=this.radiusBL;if(j<0){j*=(e=-1)}if(j>n){j=n}if(t<0){t*=(r=-1)}if(t>n){t=n}if(i<0){i*=(g=-1)}if(i>n){i=n}if(m<0){m*=(k=-1)}if(m>n){m=n}s.moveTo(p+q-t,o);s.arcTo(p+q+t*r,o-t*r,p+q,o+t,t);s.lineTo(p+q,o+l-i);s.arcTo(p+q+i*g,o+l+i*g,p+q-i,o+l,i);s.lineTo(p+m,o+l);s.arcTo(p-m*k,o+l+m*k,p,o+l-m,m);s.lineTo(p,o+j);s.arcTo(p-j*e,o-j*e,p+j,o,j);s.closePath()};(c.Circle=function(e,h,g){this.x=e;this.y=h;this.radius=g}).prototype.exec=function(e){e.arc(this.x,this.y,this.radius,0,Math.PI*2)};(c.Ellipse=function(e,j,g,i){this.x=e;this.y=j;this.w=g;this.h=i}).prototype.exec=function(s){var p=this.x,o=this.y;var q=this.w,l=this.h;var j=0.5522848;var i=(q/2)*j;var e=(l/2)*j;var r=p+q;var n=o+l;var m=p+q/2;var g=o+l/2;s.moveTo(p,g);s.bezierCurveTo(p,g-e,m-i,o,m,o);s.bezierCurveTo(m+i,o,r,g-e,r,g);s.bezierCurveTo(r,g+e,m+i,n,m,n);s.bezierCurveTo(m-i,n,p,g+e,p,g)};(c.PolyStar=function(e,k,h,g,i,j){this.x=e;this.y=k;this.radius=h;this.sides=g;this.pointSize=i;this.angle=j}).prototype.exec=function(o){var m=this.x,l=this.y;var g=this.radius;var j=(this.angle||0)/180*Math.PI;var h=this.sides;var e=1-(this.pointSize||0);var n=Math.PI/h;o.moveTo(m+Math.cos(j)*g,l+Math.sin(j)*g);for(var k=0;k<h;k++){j+=n;if(e!=1){o.lineTo(m+Math.cos(j)*g*e,l+Math.sin(j)*g*e)}j+=n;o.lineTo(m+Math.cos(j)*g,l+Math.sin(j)*g)}o.closePath()};a.beginCmd=new c.BeginPath();createjs.Graphics=a}());this.createjs=this.createjs||{};(function(){function b(){this.EventDispatcher_constructor();this.alpha=1;this.cacheCanvas=null;this.bitmapCache=null;this.id=createjs.UID.get();this.mouseEnabled=true;this.tickEnabled=true;this.name=null;this.parent=null;this.regX=0;this.regY=0;this.rotation=0;this.scaleX=1;this.scaleY=1;this.skewX=0;this.skewY=0;this.shadow=null;this.visible=true;this.x=0;this.y=0;this.transformMatrix=null;this.compositeOperation=null;this.snapToPixel=true;this.filters=null;this.mask=null;this.hitArea=null;this.cursor=null;this._props=new createjs.DisplayProps();this._rectangle=new createjs.Rectangle();this._bounds=null;this._webGLRenderStyle=b._StageGL_NONE}var d=createjs.extend(b,createjs.EventDispatcher);b._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"];b.suppressCrossDomainErrors=false;b._snapToPixelEnabled=false;b._StageGL_NONE=0;b._StageGL_SPRITE=1;b._StageGL_BITMAP=2;var a=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");if(a.getContext){b._hitTestCanvas=a;b._hitTestContext=a.getContext("2d");a.width=a.height=1}d._getStage=function(){var f=this,e=createjs.Stage;while(f.parent){f=f.parent}if(f instanceof e){return f}return null};d.getStage=createjs.deprecate(d._getStage,"DisplayObject.getStage");try{Object.defineProperties(d,{stage:{get:d._getStage},cacheID:{get:function(){return this.bitmapCache&&this.bitmapCache.cacheID},set:function(e){this.bitmapCache&&(this.bitmapCache.cacheID=e)}},scale:{get:function(){return this.scaleX},set:function(e){this.scaleX=this.scaleY=e},}})}catch(c){}d.isVisible=function(){return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)};d.draw=function(e,g){var f=this.bitmapCache;if(f&&!g){return f.draw(e)}return false};d.updateContext=function(h){var j=this,g=j.mask,i=j._props.matrix;if(g&&g.graphics&&!g.graphics.isEmpty()){g.getMatrix(i);h.transform(i.a,i.b,i.c,i.d,i.tx,i.ty);g.graphics.drawAsPath(h);h.clip();i.invert();h.transform(i.a,i.b,i.c,i.d,i.tx,i.ty)}this.getMatrix(i);var f=i.tx,e=i.ty;if(b._snapToPixelEnabled&&j.snapToPixel){f=f+(f<0?-0.5:0.5)|0;e=e+(e<0?-0.5:0.5)|0}h.transform(i.a,i.b,i.c,i.d,f,e);h.globalAlpha*=j.alpha;if(j.compositeOperation){h.globalCompositeOperation=j.compositeOperation}if(j.shadow){this._applyShadow(h,j.shadow)}};d.cache=function(e,j,g,h,i,f){if(!this.bitmapCache){this.bitmapCache=new createjs.BitmapCache()}this.bitmapCache.define(this,e,j,g,h,i,f)};d.updateCache=function(e){if(!this.bitmapCache){throw"cache() must be called before updateCache()"}this.bitmapCache.update(e)};d.uncache=function(){if(this.bitmapCache){this.bitmapCache.release();this.bitmapCache=undefined}};d.getCacheDataURL=function(){return this.bitmapCache?this.bitmapCache.getDataURL():null};d.localToGlobal=function(e,g,f){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(e,g,f||new createjs.Point())};d.globalToLocal=function(e,g,f){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(e,g,f||new createjs.Point())};d.localToLocal=function(e,h,g,f){f=this.localToGlobal(e,h,f);return g.globalToLocal(f.x,f.y,f)};d.setTransform=function(h,g,l,m,j,k,i,f,e){this.x=h||0;this.y=g||0;this.scaleX=l==null?1:l;this.scaleY=m==null?1:m;this.rotation=j||0;this.skewX=k||0;this.skewY=i||0;this.regX=f||0;this.regY=e||0;return this};d.getMatrix=function(f){var g=this,e=f&&f.identity()||new createjs.Matrix2D();return g.transformMatrix?e.copy(g.transformMatrix):e.appendTransform(g.x,g.y,g.scaleX,g.scaleY,g.rotation,g.skewX,g.skewY,g.regX,g.regY)};d.getConcatenatedMatrix=function(f){var g=this,e=this.getMatrix(f);while(g=g.parent){e.prependMatrix(g.getMatrix(g._props.matrix))}return e};d.getConcatenatedDisplayProps=function(f){f=f?f.identity():new createjs.DisplayProps();var g=this,e=g.getMatrix(f.matrix);do{f.prepend(g.visible,g.alpha,g.shadow,g.compositeOperation);if(g!=this){e.prependMatrix(g.getMatrix(g._props.matrix))}}while(g=g.parent);return f};d.hitTest=function(e,h){var f=b._hitTestContext;f.setTransform(1,0,0,1,-e,-h);this.draw(f);var g=this._testHit(f);f.setTransform(1,0,0,1,0,0);f.clearRect(0,0,2,2);return g};d.set=function(e){for(var f in e){this[f]=e[f]}return this};d.getBounds=function(){if(this._bounds){return this._rectangle.copy(this._bounds)}var e=this.cacheCanvas;if(e){var f=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,e.width/f,e.height/f)}return null};d.getTransformedBounds=function(){return this._getBounds()};d.setBounds=function(e,h,f,g){if(e==null){this._bounds=e;return}this._bounds=(this._bounds||new createjs.Rectangle()).setValues(e,h,f,g)};d.clone=function(){return this._cloneProps(new b())};d.toString=function(){return"[DisplayObject (name="+this.name+")]"};d._updateState=null;d._cloneProps=function(e){e.alpha=this.alpha;e.mouseEnabled=this.mouseEnabled;e.tickEnabled=this.tickEnabled;e.name=this.name;e.regX=this.regX;e.regY=this.regY;e.rotation=this.rotation;e.scaleX=this.scaleX;e.scaleY=this.scaleY;e.shadow=this.shadow;e.skewX=this.skewX;e.skewY=this.skewY;e.visible=this.visible;e.x=this.x;e.y=this.y;e.compositeOperation=this.compositeOperation;e.snapToPixel=this.snapToPixel;e.filters=this.filters==null?null:this.filters.slice(0);e.mask=this.mask;e.hitArea=this.hitArea;e.cursor=this.cursor;e._bounds=this._bounds;return e};d._applyShadow=function(e,f){f=f||Shadow.identity;e.shadowColor=f.color;e.shadowOffsetX=f.offsetX;e.shadowOffsetY=f.offsetY;e.shadowBlur=f.blur};d._tick=function(f){var e=this._listeners;if(e&&e.tick){f.target=null;f.propagationStopped=f.immediatePropagationStopped=false;this.dispatchEvent(f)}};d._testHit=function(f){try{var g=f.getImageData(0,0,1,1).data[3]>1}catch(h){if(!b.suppressCrossDomainErrors){throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}}return g};d._getBounds=function(f,e){return this._transformBounds(this.getBounds(),f,e)};d._transformBounds=function(h,o,i){if(!h){return h}var k=h.x,j=h.y,m=h.width,v=h.height,g=this._props.matrix;g=i?g.identity():this.getMatrix(g);if(k||j){g.appendTransform(0,0,1,1,0,0,0,-k,-j)}if(o){g.prependMatrix(o)}var n=m*g.a,l=m*g.b;var f=v*g.c,e=v*g.d;var u=g.tx,t=g.ty;var s=u,q=u,r=t,p=t;if((k=n+u)<s){s=k}else{if(k>q){q=k}}if((k=n+f+u)<s){s=k}else{if(k>q){q=k}}if((k=f+u)<s){s=k}else{if(k>q){q=k}}if((j=l+t)<r){r=j}else{if(j>p){p=j}}if((j=l+e+t)<r){r=j}else{if(j>p){p=j}}if((j=e+t)<r){r=j}else{if(j>p){p=j}}return h.setValues(s,r,q-s,p-r)};d._hasMouseEventListener=function(){var f=b._MOUSE_EVENTS;for(var g=0,e=f.length;g<e;g++){if(this.hasEventListener(f[g])){return true}}return !!this.cursor};createjs.DisplayObject=createjs.promote(b,"EventDispatcher")}());this.createjs=this.createjs||{};(function(){function a(){this.DisplayObject_constructor();this.children=[];this.mouseChildren=true;this.tickChildren=true}var c=createjs.extend(a,createjs.DisplayObject);c._getNumChildren=function(){return this.children.length};c.getNumChildren=createjs.deprecate(c._getNumChildren,"Container.getNumChildren");try{Object.defineProperties(c,{numChildren:{get:c._getNumChildren}})}catch(b){}c.initialize=a;c.isVisible=function(){var d=this.cacheCanvas||this.children.length;return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&d)};c.draw=function(e,h){if(this.DisplayObject_draw(e,h)){return true}var g=this.children.slice();for(var f=0,d=g.length;f<d;f++){var j=g[f];if(!j.isVisible()){continue}e.save();j.updateContext(e);j.draw(e);e.restore()}return true};c.addChild=function(h){if(h==null){return h}var d=arguments.length;if(d>1){for(var e=0;e<d;e++){this.addChild(arguments[e])}return arguments[d-1]}var g=h.parent,f=g===this;g&&g._removeChildAt(createjs.indexOf(g.children,h),f);h.parent=this;this.children.push(h);if(!f){h.dispatchEvent("added")}return h};c.addChildAt=function(k,e){var d=arguments.length;var j=arguments[d-1];if(j<0||j>this.children.length){return arguments[d-2]}if(d>2){for(var f=0;f<d-1;f++){this.addChildAt(arguments[f],j+f)}return arguments[d-2]}var h=k.parent,g=h===this;h&&h._removeChildAt(createjs.indexOf(h.children,k),g);k.parent=this;this.children.splice(e,0,k);if(!g){k.dispatchEvent("added")}return k};c.removeChild=function(g){var d=arguments.length;if(d>1){var f=true;for(var e=0;e<d;e++){f=f&&this.removeChild(arguments[e])}return f}return this._removeChildAt(createjs.indexOf(this.children,g))};c.removeChildAt=function(f){var e=arguments.length;if(e>1){var d=[];for(var g=0;g<e;g++){d[g]=arguments[g]}d.sort(function(j,i){return i-j});var h=true;for(var g=0;g<e;g++){h=h&&this._removeChildAt(d[g])}return h}return this._removeChildAt(f)};c.removeAllChildren=function(){var d=this.children;while(d.length){this._removeChildAt(0)}};c.getChildAt=function(d){return this.children[d]};c.getChildByName=function(f){var e=this.children;for(var g=0,d=e.length;g<d;g++){if(e[g].name==f){return e[g]}}return null};c.sortChildren=function(d){this.children.sort(d)};c.getChildIndex=function(d){return createjs.indexOf(this.children,d)};c.swapChildrenAt=function(g,h){var d=this.children;var f=d[g];var e=d[h];if(!f||!e){return}d[g]=e;d[h]=f};c.swapChildren=function(d,f){var g=this.children;var j,k;for(var h=0,e=g.length;h<e;h++){if(g[h]==d){j=h}if(g[h]==f){k=h}if(j!=null&&k!=null){break}}if(h==e){return}g[j]=f;g[k]=d};c.setChildIndex=function(h,f){var e=this.children,d=e.length;if(h.parent!=this||f<0||f>=d){return}for(var g=0;g<d;g++){if(e[g]==h){break}}if(g==d||g==f){return}e.splice(g,1);e.splice(f,0,h)};c.contains=function(d){while(d){if(d==this){return true}d=d.parent}return false};c.hitTest=function(d,e){return(this.getObjectUnderPoint(d,e)!=null)};c.getObjectsUnderPoint=function(e,h,g){var d=[];var f=this.localToGlobal(e,h);this._getObjectsUnderPoint(f.x,f.y,d,g>0,g==1);return d};c.getObjectUnderPoint=function(d,g,f){var e=this.localToGlobal(d,g);return this._getObjectsUnderPoint(e.x,e.y,null,f>0,f==1)};c.getBounds=function(){return this._getBounds(null,true)};c.getTransformedBounds=function(){return this._getBounds()};c.clone=function(d){var e=this._cloneProps(new a());if(d){this._cloneChildren(e)}return e};c.toString=function(){return"[Container (name="+this.name+")]"};c._tick=function(e){if(this.tickChildren){for(var d=this.children.length-1;d>=0;d--){var f=this.children[d];if(f.tickEnabled&&f._tick){f._tick(e)}}}this.DisplayObject__tick(e)};c._cloneChildren=function(g){if(g.children.length){g.removeAllChildren()}var d=g.children;for(var f=0,e=this.children.length;f<e;f++){var h=this.children[f].clone(true);h.parent=g;d.push(h)}};c._removeChildAt=function(d,e){if(d<0||d>this.children.length-1){return false}var f=this.children[d];if(f){f.parent=null}this.children.splice(d,1);if(!e){f.dispatchEvent("removed")}return true};c._getObjectsUnderPoint=function(s,r,k,n,o,m){m=m||0;if(!m&&!this._testMask(this,s,r)){return null}var e,t=createjs.DisplayObject._hitTestContext;o=o||(n&&this._hasMouseEventListener());var g=this.children,h=g.length;for(var j=h-1;j>=0;j--){var f=g[j];var d=f.hitArea;if(!f.visible||(!d&&!f.isVisible())||(n&&!f.mouseEnabled)){continue}if(!d&&!this._testMask(f,s,r)){continue}if(!d&&f instanceof a){var q=f._getObjectsUnderPoint(s,r,k,n,o,m+1);if(!k&&q){return(n&&!this.mouseChildren)?this:q}}else{if(n&&!o&&!f._hasMouseEventListener()){continue}var p=f.getConcatenatedDisplayProps(f._props);e=p.matrix;if(d){e.appendMatrix(d.getMatrix(d._props.matrix));p.alpha=d.alpha}t.globalAlpha=p.alpha;t.setTransform(e.a,e.b,e.c,e.d,e.tx-s,e.ty-r);(d||f).draw(t);if(!this._testHit(t)){continue}t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,2,2);if(k){k.push(f)}else{return(n&&!this.mouseChildren)?this:f}}}return null};c._testMask=function(j,d,i){var f=j.mask;if(!f||!f.graphics||f.graphics.isEmpty()){return true}var h=this._props.matrix,g=j.parent;h=g?g.getConcatenatedMatrix(h):h.identity();h=f.getMatrix(f._props.matrix).prependMatrix(h);var e=createjs.DisplayObject._hitTestContext;e.setTransform(h.a,h.b,h.c,h.d,h.tx-d,h.ty-i);f.graphics.drawAsPath(e);e.fillStyle="#000";e.fill();if(!this._testHit(e)){return false}e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,2,2);return true};c._getBounds=function(j,g){var e=this.DisplayObject_getBounds();if(e){return this._transformBounds(e,j,g)}var h=this._props.matrix;h=g?h.identity():this.getMatrix(h);if(j){h.prependMatrix(j)}var d=this.children.length,k=null;for(var f=0;f<d;f++){var m=this.children[f];if(!m.visible||!(e=m._getBounds(h))){continue}if(k){k.extend(e.x,e.y,e.width,e.height)}else{k=e.clone()}}return k};createjs.Container=createjs.promote(a,"DisplayObject")}());this.createjs=this.createjs||{};(function(){function c(d){this.Container_constructor();this.autoClear=true;this.canvas=(typeof d=="string")?document.getElementById(d):d;this.mouseX=0;this.mouseY=0;this.drawRect=null;this.snapToPixelEnabled=false;this.mouseInBounds=false;this.tickOnUpdate=true;this.mouseMoveOutside=false;this.preventSelection=true;this._pointerData={};this._pointerCount=0;this._primaryPointerID=null;this._mouseOverIntervalID=null;this._nextStage=null;this._prevStage=null;this.enableDOMEvents(true)}var b=createjs.extend(c,createjs.Container);b._get_nextStage=function(){return this._nextStage};b._set_nextStage=function(d){if(this._nextStage){this._nextStage._prevStage=null}if(d){d._prevStage=this}this._nextStage=d};try{Object.defineProperties(b,{nextStage:{get:b._get_nextStage,set:b._set_nextStage}})}catch(a){}b.update=function(e){if(!this.canvas){return}if(this.tickOnUpdate){this.tick(e)}if(this.dispatchEvent("drawstart",false,true)===false){return}createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var f=this.drawRect,d=this.canvas.getContext("2d");d.setTransform(1,0,0,1,0,0);if(this.autoClear){if(f){d.clearRect(f.x,f.y,f.width,f.height)}else{d.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}}d.save();if(this.drawRect){d.beginPath();d.rect(f.x,f.y,f.width,f.height);d.clip()}this.updateContext(d);this.draw(d,false);d.restore();this.dispatchEvent("drawend")};b.tick=function(d){if(!this.tickEnabled||this.dispatchEvent("tickstart",false,true)===false){return}var e=new createjs.Event("tick");if(d){for(var f in d){if(d.hasOwnProperty(f)){e[f]=d[f]}}}this._tick(e);this.dispatchEvent("tickend")};b.handleEvent=function(d){if(d.type=="tick"){this.update(d)}};b.clear=function(){if(!this.canvas){return}var d=this.canvas.getContext("2d");d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)};b.toDataURL=function(f,l){var j,e=this.canvas.getContext("2d"),d=this.canvas.width,g=this.canvas.height;if(f){j=e.getImageData(0,0,d,g);var i=e.globalCompositeOperation;e.globalCompositeOperation="destination-over";e.fillStyle=f;e.fillRect(0,0,d,g)}var k=this.canvas.toDataURL(l||"image/png");if(f){e.putImageData(j,0,0);e.globalCompositeOperation=i}return k};b.enableMouseOver=function(e){if(this._mouseOverIntervalID){clearInterval(this._mouseOverIntervalID);this._mouseOverIntervalID=null;if(e==0){this._testMouseOver(true)}}if(e==null){e=20}else{if(e<=0){return}}var d=this;this._mouseOverIntervalID=setInterval(function(){d._testMouseOver()},1000/Math.min(50,e))};b.enableDOMEvents=function(f){if(f==null){f=true}var i,g,d=this._eventListeners;if(!f&&d){for(i in d){g=d[i];g.t.removeEventListener(i,g.f,false)}this._eventListeners=null}else{if(f&&!d&&this.canvas){var e=window.addEventListener?window:document;var h=this;d=this._eventListeners={};d.mouseup={t:e,f:function(j){h._handleMouseUp(j)}};d.mousemove={t:e,f:function(j){h._handleMouseMove(j)}};d.dblclick={t:this.canvas,f:function(j){h._handleDoubleClick(j)}};d.mousedown={t:this.canvas,f:function(j){h._handleMouseDown(j)}};for(i in d){g=d[i];g.t.addEventListener(i,g.f,false)}}}};b.clone=function(){throw ("Stage cannot be cloned.")};b.toString=function(){return"[Stage (name="+this.name+")]"};b._getElementRect=function(i){var j;try{j=i.getBoundingClientRect()}catch(f){j={top:i.offsetTop,left:i.offsetLeft,width:i.offsetWidth,height:i.offsetHeight}}var n=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0);var m=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0);var k=window.getComputedStyle?getComputedStyle(i,null):i.currentStyle;var l=parseInt(k.paddingLeft)+parseInt(k.borderLeftWidth);var g=parseInt(k.paddingTop)+parseInt(k.borderTopWidth);var h=parseInt(k.paddingRight)+parseInt(k.borderRightWidth);var d=parseInt(k.paddingBottom)+parseInt(k.borderBottomWidth);return{left:j.left+n+l,right:j.right+n-h,top:j.top+m+g,bottom:j.bottom+m-d}};b._getPointerData=function(e){var d=this._pointerData[e];if(!d){d=this._pointerData[e]={x:0,y:0}}return d};b._handleMouseMove=function(d){if(!d){d=window.event}this._handlePointerMove(-1,d,d.pageX,d.pageY)};b._handlePointerMove=function(l,j,h,g,f){if(this._prevStage&&f===undefined){return}if(!this.canvas){return}var d=this._nextStage,k=this._getPointerData(l);var i=k.inBounds;this._updatePointerPosition(l,j,h,g);if(i||k.inBounds||this.mouseMoveOutside){if(l===-1&&k.inBounds==!i){this._dispatchMouseEvent(this,(i?"mouseleave":"mouseenter"),false,l,k,j)}this._dispatchMouseEvent(this,"stagemousemove",false,l,k,j);this._dispatchMouseEvent(k.target,"pressmove",true,l,k,j)}d&&d._handlePointerMove(l,j,h,g,null)};b._updatePointerPosition=function(m,k,i,f){var j=this._getElementRect(this.canvas);i-=j.left;f-=j.top;var d=this.canvas.width;var g=this.canvas.height;i/=(j.right-j.left)/d;f/=(j.bottom-j.top)/g;var l=this._getPointerData(m);if(l.inBounds=(i>=0&&f>=0&&i<=d-1&&f<=g-1)){l.x=i;l.y=f}else{if(this.mouseMoveOutside){l.x=i<0?0:(i>d-1?d-1:i);l.y=f<0?0:(f>g-1?g-1:f)}}l.posEvtObj=k;l.rawX=i;l.rawY=f;if(m===this._primaryPointerID||m===-1){this.mouseX=l.x;this.mouseY=l.y;this.mouseInBounds=l.inBounds}};b._handleMouseUp=function(d){this._handlePointerUp(-1,d,false)};b._handlePointerUp=function(l,i,g,f){var d=this._nextStage,j=this._getPointerData(l);if(this._prevStage&&f===undefined){return}var k=null,h=j.target;if(!f&&(h||d)){k=this._getObjectsUnderPoint(j.x,j.y,null,true)}if(j.down){this._dispatchMouseEvent(this,"stagemouseup",false,l,j,i,k);j.down=false}if(k==h){this._dispatchMouseEvent(h,"click",true,l,j,i)}this._dispatchMouseEvent(h,"pressup",true,l,j,i);if(g){if(l==this._primaryPointerID){this._primaryPointerID=null}delete (this._pointerData[l])}else{j.target=null}d&&d._handlePointerUp(l,i,g,f||k&&this)};b._handleMouseDown=function(d){this._handlePointerDown(-1,d,d.pageX,d.pageY)};b._handlePointerDown=function(l,i,h,g,f){if(this.preventSelection){i.preventDefault()}if(this._primaryPointerID==null||l===-1){this._primaryPointerID=l}if(g!=null){this._updatePointerPosition(l,i,h,g)}var k=null,d=this._nextStage,j=this._getPointerData(l);if(!f){k=j.target=this._getObjectsUnderPoint(j.x,j.y,null,true)}if(j.inBounds){this._dispatchMouseEvent(this,"stagemousedown",false,l,j,i,k);j.down=true}this._dispatchMouseEvent(k,"mousedown",true,l,j,i);d&&d._handlePointerDown(l,i,h,g,f||k&&this)};b._testMouseOver=function(p,g,w){if(this._prevStage&&g===undefined){return}var q=this._nextStage;if(!this._mouseOverIntervalID){q&&q._testMouseOver(p,g,w);return}var j=this._getPointerData(-1);if(!j||(!p&&this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){return}var u=j.posEvtObj;var m=w||u&&(u.target==this.canvas);var h=null,f=-1,v="",x,n,k;if(!g&&(p||this.mouseInBounds&&m)){h=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,true);this._mouseOverX=this.mouseX;this._mouseOverY=this.mouseY}var d=this._mouseOverTarget||[];var s=d[d.length-1];var r=this._mouseOverTarget=[];x=h;while(x){r.unshift(x);if(!v){v=x.cursor}x=x.parent}this.canvas.style.cursor=v;if(!g&&w){w.canvas.style.cursor=v}for(n=0,k=r.length;n<k;n++){if(r[n]!=d[n]){break}f=n}if(s!=h){this._dispatchMouseEvent(s,"mouseout",true,-1,j,u,h)}for(n=d.length-1;n>f;n--){this._dispatchMouseEvent(d[n],"rollout",false,-1,j,u,h)}for(n=r.length-1;n>f;n--){this._dispatchMouseEvent(r[n],"rollover",false,-1,j,u,s)}if(s!=h){this._dispatchMouseEvent(h,"mouseover",true,-1,j,u,s)}q&&q._testMouseOver(p,g||h&&this,w||m&&this)};b._handleDoubleClick=function(g,f){var i=null,d=this._nextStage,h=this._getPointerData(-1);if(!f){i=this._getObjectsUnderPoint(h.x,h.y,null,true);this._dispatchMouseEvent(i,"dblclick",true,-1,h,g)}d&&d._handleDoubleClick(g,f||i&&this)};b._dispatchMouseEvent=function(k,h,g,i,j,d,f){if(!k||(!g&&!k.hasEventListener(h))){return}var e=new createjs.MouseEvent(h,g,false,j.x,j.y,d,i,i===this._primaryPointerID||i===-1,j.rawX,j.rawY,f);k.dispatchEvent(e)};createjs.Stage=createjs.promote(c,"Container")}());this.createjs=this.createjs||{};(function(){function c(f,e){this.Stage_constructor(f);if(e!==undefined){if(typeof e!=="object"){throw ("Invalid options object")}var d=e.premultiply;var j=e.transparent;var h=e.antialias;var i=e.preserveBuffer;var g=e.autoPurge}this.vocalDebug=false;this._preserveBuffer=i||false;this._antialias=h||false;this._transparent=j||false;this._premultiply=d||false;this._autoPurge=undefined;this.autoPurge=g;this._viewportWidth=0;this._viewportHeight=0;this._projectionMatrix=null;this._webGLContext=null;this._clearColor={r:0.5,g:0.5,b:0.5,a:0};this._maxCardsPerBatch=c.DEFAULT_MAX_BATCH_SIZE;this._activeShader=null;this._vertices=null;this._vertexPositionBuffer=null;this._uvs=null;this._uvPositionBuffer=null;this._indices=null;this._textureIndexBuffer=null;this._alphas=null;this._alphaBuffer=null;this._textureDictionary=[];this._textureIDs={};this._batchTextures=[];this._baseTextures=[];this._batchTextureCount=8;this._lastTextureInsert=-1;this._batchID=0;this._drawID=0;this._slotBlacklist=[];this._isDrawing=0;this._lastTrackedCanvas=0;this.isCacheControlled=false;this._cacheContainer=new createjs.Container();this._initializeWebGL()}var b=createjs.extend(c,createjs.Stage);c.buildUVRects=function(k,m,g){if(!k||!k._frames){return null}if(m===undefined){m=-1}if(g===undefined){g=false}var l=(m!=-1&&g)?(m):(0);var d=(m!=-1&&g)?(m+1):(k._frames.length);for(var e=l;e<d;e++){var j=k._frames[e];if(j.uvRect||j.image.width<=0||j.image.height<=0){continue}var h=j.rect;j.uvRect={t:h.y/j.image.height,l:h.x/j.image.width,b:(h.y+h.height)/j.image.height,r:(h.x+h.width)/j.image.width}}return k._frames[(m!=-1)?m:0].uvRect||{t:0,l:0,b:1,r:1}};c.isWebGLActive=function(d){return d&&d instanceof WebGLRenderingContext&&typeof WebGLRenderingContext!=="undefined"};c.VERTEX_PROPERTY_COUNT=6;c.INDICIES_PER_CARD=6;c.DEFAULT_MAX_BATCH_SIZE=10000;c.WEBGL_MAX_INDEX_NUM=Math.pow(2,16);c.UV_RECT={t:0,l:0,b:1,r:1};try{c.COVER_VERT=new Float32Array([-1,1,1,1,-1,-1,1,1,1,-1,-1,-1]);c.COVER_UV=new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]);c.COVER_UV_FLIP=new Float32Array([0,1,1,1,0,0,1,1,1,0,0,0])}catch(a){}c.REGULAR_VARYING_HEADER=("precision mediump float;varying vec2 vTextureCoord;varying lowp float indexPicker;varying lowp float alphaValue;");c.REGULAR_VERTEX_HEADER=(c.REGULAR_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;attribute lowp float textureIndex;attribute lowp float objectAlpha;uniform mat4 pMatrix;");c.REGULAR_FRAGMENT_HEADER=(c.REGULAR_VARYING_HEADER+"uniform sampler2D uSampler[{{count}}];");c.REGULAR_VERTEX_BODY=("void main(void) {gl_Position = vec4((vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],pMatrix[3][2],1.0);alphaValue = objectAlpha;indexPicker = textureIndex;vTextureCoord = uvPosition;}");c.REGULAR_FRAGMENT_BODY=("void main(void) {vec4 color = vec4(1.0, 0.0, 0.0, 1.0);if (indexPicker <= 0.5) {color = texture2D(uSampler[0], vTextureCoord);{{alternates}}}{{fragColor}}}");c.REGULAR_FRAG_COLOR_NORMAL=("gl_FragColor = vec4(color.rgb, color.a * alphaValue);");c.REGULAR_FRAG_COLOR_PREMULTIPLY=("if(color.a > 0.0035) {gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);} else {gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);}");c.PARTICLE_VERTEX_BODY=(c.REGULAR_VERTEX_BODY);c.PARTICLE_FRAGMENT_BODY=(c.REGULAR_FRAGMENT_BODY);c.COVER_VARYING_HEADER=("precision mediump float;varying highp vec2 vRenderCoord;varying highp vec2 vTextureCoord;");c.COVER_VERTEX_HEADER=(c.COVER_VARYING_HEADER+"attribute vec2 vertexPosition;attribute vec2 uvPosition;uniform float uUpright;");c.COVER_FRAGMENT_HEADER=(c.COVER_VARYING_HEADER+"uniform sampler2D uSampler;");c.COVER_VERTEX_BODY=("void main(void) {gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);vRenderCoord = uvPosition;vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));}");c.COVER_FRAGMENT_BODY=("void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = color;}");b._get_isWebGL=function(){return !!this._webGLContext};b._set_autoPurge=function(d){d=isNaN(d)?1200:d;if(d!=-1){d=d<10?10:d}this._autoPurge=d};b._get_autoPurge=function(){return Number(this._autoPurge)};try{Object.defineProperties(b,{isWebGL:{get:b._get_isWebGL},autoPurge:{get:b._get_autoPurge,set:b._set_autoPurge}})}catch(a){}b._initializeWebGL=function(){if(this.canvas){if(!this._webGLContext||this._webGLContext.canvas!==this.canvas){var d={depth:false,alpha:this._transparent,stencil:true,antialias:this._antialias,premultipliedAlpha:this._premultiply,preserveDrawingBuffer:this._preserveBuffer};var e=this._webGLContext=this._fetchWebGLContext(this.canvas,d);if(!e){return null}this.updateSimultaneousTextureCount(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS));this._maxTextureSlots=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);this._createBuffers(e);this._initTextures(e);e.disable(e.DEPTH_TEST);e.enable(e.BLEND);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiply);this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);this.updateViewport(this._viewportWidth||this.canvas.width,this._viewportHeight||this.canvas.height)}}else{this._webGLContext=null}return this._webGLContext};b.update=function(e){if(!this.canvas){return}if(this.tickOnUpdate){this.tick(e)}this.dispatchEvent("drawstart");if(this.autoClear){this.clear()}if(this._webGLContext){this._batchDraw(this,this._webGLContext);if(this._autoPurge!=-1&&!(this._drawID%((this._autoPurge/2)|0))){this.purgeTextures(this._autoPurge)}}else{var d=this.canvas.getContext("2d");d.save();this.updateContext(d);this.draw(d,false);d.restore()}this.dispatchEvent("drawend")};b.clear=function(){if(!this.canvas){return}if(c.isWebGLActive(this._webGLContext)){var d=this._webGLContext;var f=this._clearColor;var e=this._transparent?f.a:1;this._webGLContext.clearColor(f.r*e,f.g*e,f.b*e,e);d.clear(d.COLOR_BUFFER_BIT);this._webGLContext.clearColor(f.r,f.g,f.b,f.a)}else{this.Stage_clear()}};b.draw=function(d,e){if(d===this._webGLContext&&c.isWebGLActive(this._webGLContext)){var f=this._webGLContext;this._batchDraw(this,f,e);return true}else{return this.Stage_draw(d,e)}};b.cacheDraw=function(g,d,e){if(c.isWebGLActive(this._webGLContext)){var f=this._webGLContext;this._cacheDraw(f,g,d,e);return true}else{return false}};b.protectTextureSlot=function(e,d){if(e>this._maxTextureSlots||e<0){throw"Slot outside of acceptable range"}this._slotBlacklist[e]=!!d};b.getTargetRenderTexture=function(j,d,e){var g,f=false;var i=this._webGLContext;if(j.__lastRT!==undefined&&j.__lastRT===j.__rtA){f=true}if(!f){if(j.__rtA===undefined){j.__rtA=this.getRenderBufferTexture(d,e)}else{if(d!=j.__rtA._width||e!=j.__rtA._height){this.resizeTexture(j.__rtA,d,e)}this.setTextureParams(i)}g=j.__rtA}else{if(j.__rtB===undefined){j.__rtB=this.getRenderBufferTexture(d,e)}else{if(d!=j.__rtB._width||e!=j.__rtB._height){this.resizeTexture(j.__rtB,d,e)}this.setTextureParams(i)}g=j.__rtB}if(!g){throw"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances"}j.__lastRT=g;return g};b.releaseTexture=function(g){var f,d;if(!g){return}if(g.children){for(f=0,d=g.children.length;f<d;f++){this.releaseTexture(g.children[f])}}if(g.cacheCanvas){g.uncache()}var e=undefined;if(g._storeID!==undefined){if(g===this._textureDictionary[g._storeID]){this._killTextureObject(g);g._storeID=undefined;return}e=g}else{if(g._webGLRenderStyle===2){e=g.image}else{if(g._webGLRenderStyle===1){for(f=0,d=g.spriteSheet._images.length;f<d;f++){this.releaseTexture(g.spriteSheet._images[f])}return}}}if(e===undefined){if(this.vocalDebug){console.log("No associated texture found on release")}return}this._killTextureObject(this._textureDictionary[e._storeID]);e._storeID=undefined};b.purgeTextures=function(g){if(g==undefined){g=100}var h=this._textureDictionary;var d=h.length;for(var e=0;e<d;e++){var f=h[e];if(!f){continue}if(f._drawID+g<=this._drawID){this._killTextureObject(f)}}};b.updateSimultaneousTextureCount=function(d){var h=this._webGLContext;var g=false;if(d<1||isNaN(d)){d=1}this._batchTextureCount=d;while(!g){try{this._activeShader=this._fetchShaderProgram(h);g=true}catch(f){if(this._batchTextureCount==1){throw"Cannot compile shader "+f}this._batchTextureCount-=4;if(this._batchTextureCount<1){this._batchTextureCount=1}if(this.vocalDebug){console.log("Reducing desired texture count due to errors: "+this._batchTextureCount)}}}};b.updateViewport=function(d,e){this._viewportWidth=d|0;this._viewportHeight=e|0;var f=this._webGLContext;if(f){f.viewport(0,0,this._viewportWidth,this._viewportHeight);this._projectionMatrix=new Float32Array([2/this._viewportWidth,0,0,0,0,-2/this._viewportHeight,1,0,0,0,1,0,-1,1,0.1,0]);this._projectionMatrixFlip=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);this._projectionMatrixFlip.set(this._projectionMatrix);this._projectionMatrixFlip[5]*=-1;this._projectionMatrixFlip[13]*=-1}};b.getFilterShader=function(f){if(!f){f=this}var h=this._webGLContext;var d=this._activeShader;if(f._builtShader){d=f._builtShader;if(f.shaderParamSetup){h.useProgram(d);f.shaderParamSetup(h,this,d)}}else{try{d=this._fetchShaderProgram(h,"filter",f.VTX_SHADER_BODY,f.FRAG_SHADER_BODY,f.shaderParamSetup&&f.shaderParamSetup.bind(f));f._builtShader=d;d._name=f.toString()}catch(g){console&&console.log("SHADER SWITCH FAILURE",g)}}return d};b.getBaseTexture=function(e,g){var f=Math.ceil(e>0?e:1)||1;var i=Math.ceil(g>0?g:1)||1;var j=this._webGLContext;var d=j.createTexture();this.resizeTexture(d,f,i);this.setTextureParams(j,false);return d};b.resizeTexture=function(d,e,f){var g=this._webGLContext;g.bindTexture(g.TEXTURE_2D,d);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,e,f,0,g.RGBA,g.UNSIGNED_BYTE,null);d.width=e;d.height=f};b.getRenderBufferTexture=function(d,g){var i=this._webGLContext;var f=this.getBaseTexture(d,g);if(!f){return null}var e=i.createFramebuffer();if(!e){return null}f.width=d;f.height=g;i.bindFramebuffer(i.FRAMEBUFFER,e);i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,f,0);e._renderTexture=f;f._frameBuffer=e;f._storeID=this._textureDictionary.length;this._textureDictionary[f._storeID]=f;i.bindFramebuffer(i.FRAMEBUFFER,null);return f};b.setTextureParams=function(e,d){if(d&&this._antialias){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR)}else{e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)};b.setClearColor=function(f){var j,i,d,e,h;if(typeof f=="string"){if(f.indexOf("#")==0){if(f.length==4){f="#"+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)+f.charAt(3)+f.charAt(3)}j=Number("0x"+f.slice(1,3))/255;i=Number("0x"+f.slice(3,5))/255;d=Number("0x"+f.slice(5,7))/255;e=Number("0x"+f.slice(7,9))/255}else{if(f.indexOf("rgba(")==0){h=f.slice(5,-1).split(",");j=Number(h[0])/255;i=Number(h[1])/255;d=Number(h[2])/255;e=Number(h[3])}}}else{j=((f&4278190080)>>>24)/255;i=((f&16711680)>>>16)/255;d=((f&65280)>>>8)/255;e=(f&255)/255}this._clearColor.r=j||0;this._clearColor.g=i||0;this._clearColor.b=d||0;this._clearColor.a=e||0;if(!this._webGLContext){return}this._webGLContext.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a)};b.toString=function(){return"[StageGL (name="+this.name+")]"};b._fetchWebGLContext=function(f,d){var i;try{i=f.getContext("webgl",d)||f.getContext("experimental-webgl",d)}catch(g){}if(!i){var h="Could not initialize WebGL";console.error?console.error(h):console.log(h)}else{i.viewportWidth=f.width;i.viewportHeight=f.height}return i};b._fetchShaderProgram=function(m,e,h,n,f){m.useProgram(null);var g,l;switch(e){case"filter":l=c.COVER_VERTEX_HEADER+(h||c.COVER_VERTEX_BODY);g=c.COVER_FRAGMENT_HEADER+(n||c.COVER_FRAGMENT_BODY);break;case"particle":l=c.REGULAR_VERTEX_HEADER+c.PARTICLE_VERTEX_BODY;g=c.REGULAR_FRAGMENT_HEADER+c.PARTICLE_FRAGMENT_BODY;break;case"override":l=c.REGULAR_VERTEX_HEADER+(h||c.REGULAR_VERTEX_BODY);g=c.REGULAR_FRAGMENT_HEADER+(n||c.REGULAR_FRAGMENT_BODY);break;case"regular":default:l=c.REGULAR_VERTEX_HEADER+c.REGULAR_VERTEX_BODY;g=c.REGULAR_FRAGMENT_HEADER+c.REGULAR_FRAGMENT_BODY;break}var p=this._createShader(m,m.VERTEX_SHADER,l);var j=this._createShader(m,m.FRAGMENT_SHADER,g);var d=m.createProgram();m.attachShader(d,p);m.attachShader(d,j);m.linkProgram(d);d._type=e;if(!m.getProgramParameter(d,m.LINK_STATUS)){m.useProgram(this._activeShader);throw m.getProgramInfoLog(d)}m.useProgram(d);switch(e){case"filter":d.vertexPositionAttribute=m.getAttribLocation(d,"vertexPosition");m.enableVertexAttribArray(d.vertexPositionAttribute);d.uvPositionAttribute=m.getAttribLocation(d,"uvPosition");m.enableVertexAttribArray(d.uvPositionAttribute);d.samplerUniform=m.getUniformLocation(d,"uSampler");m.uniform1i(d.samplerUniform,0);d.uprightUniform=m.getUniformLocation(d,"uUpright");m.uniform1f(d.uprightUniform,0);if(f){f(m,this,d)}break;case"override":case"particle":case"regular":default:d.vertexPositionAttribute=m.getAttribLocation(d,"vertexPosition");m.enableVertexAttribArray(d.vertexPositionAttribute);d.uvPositionAttribute=m.getAttribLocation(d,"uvPosition");m.enableVertexAttribArray(d.uvPositionAttribute);d.textureIndexAttribute=m.getAttribLocation(d,"textureIndex");m.enableVertexAttribArray(d.textureIndexAttribute);d.alphaAttribute=m.getAttribLocation(d,"objectAlpha");m.enableVertexAttribArray(d.alphaAttribute);var o=[];for(var k=0;k<this._batchTextureCount;k++){o[k]=k}d.samplerData=o;d.samplerUniform=m.getUniformLocation(d,"uSampler");m.uniform1iv(d.samplerUniform,o);d.pMatrixUniform=m.getUniformLocation(d,"pMatrix");break}m.useProgram(this._activeShader);return d};b._createShader=function(j,g,h){h=h.replace(/{{count}}/g,this._batchTextureCount);var d="";for(var f=1;f<this._batchTextureCount;f++){d+="} else if (indexPicker <= "+f+".5) { color = texture2D(uSampler["+f+"], vTextureCoord);"}h=h.replace(/{{alternates}}/g,d);h=h.replace(/{{fragColor}}/g,this._premultiply?c.REGULAR_FRAG_COLOR_NORMAL:c.REGULAR_FRAG_COLOR_PREMULTIPLY);var e=j.createShader(g);j.shaderSource(e,h);j.compileShader(e);if(!j.getShaderParameter(e,j.COMPILE_STATUS)){throw j.getShaderInfoLog(e)}return e};b._createBuffers=function(j){var o=this._maxCardsPerBatch*c.INDICIES_PER_CARD;var n,h,f;var q=this._vertexPositionBuffer=j.createBuffer();j.bindBuffer(j.ARRAY_BUFFER,q);n=2;var e=this._vertices=new Float32Array(o*n);for(h=0,f=e.length;h<f;h+=n){e[h]=e[h+1]=0}j.bufferData(j.ARRAY_BUFFER,e,j.DYNAMIC_DRAW);q.itemSize=n;q.numItems=o;var d=this._uvPositionBuffer=j.createBuffer();j.bindBuffer(j.ARRAY_BUFFER,d);n=2;var g=this._uvs=new Float32Array(o*n);for(h=0,f=g.length;h<f;h+=n){g[h]=g[h+1]=0}j.bufferData(j.ARRAY_BUFFER,g,j.DYNAMIC_DRAW);d.itemSize=n;d.numItems=o;var k=this._textureIndexBuffer=j.createBuffer();j.bindBuffer(j.ARRAY_BUFFER,k);n=1;var p=this._indices=new Float32Array(o*n);for(h=0,f=p.length;h<f;h++){p[h]=0}j.bufferData(j.ARRAY_BUFFER,p,j.DYNAMIC_DRAW);k.itemSize=n;k.numItems=o;var r=this._alphaBuffer=j.createBuffer();j.bindBuffer(j.ARRAY_BUFFER,r);n=1;var m=this._alphas=new Float32Array(o*n);for(h=0,f=m.length;h<f;h++){m[h]=1}j.bufferData(j.ARRAY_BUFFER,m,j.DYNAMIC_DRAW);r.itemSize=n;r.numItems=o};b._initTextures=function(){this._lastTextureInsert=-1;this._textureDictionary=[];this._textureIDs={};this._baseTextures=[];this._batchTextures=[];for(var e=0;e<this._batchTextureCount;e++){var d=this.getBaseTexture();this._baseTextures[e]=this._batchTextures[e]=d;if(!d){throw"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances"}}};b._loadTextureImage=function(i,f){var h=f.src;if(!h){f._isCanvas=true;h=f.src="canvas_"+this._lastTrackedCanvas++}var e=this._textureIDs[h];if(e===undefined){e=this._textureIDs[h]=this._textureDictionary.length}if(this._textureDictionary[e]===undefined){this._textureDictionary[e]=this.getBaseTexture()}var d=this._textureDictionary[e];if(d){d._batchID=this._batchID;d._storeID=e;d._imageData=f;this._insertTextureInBatch(i,d);f._storeID=e;if(f.complete||f.naturalWidth||f._isCanvas){this._updateTextureImageData(i,f)}else{f.addEventListener("load",this._updateTextureImageData.bind(this,i,f))}}else{var g="Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances";(console.error&&console.error(g))||console.log(g);d=this._baseTextures[0];d._batchID=this._batchID;d._storeID=-1;d._imageData=d;this._insertTextureInBatch(i,d)}return d};b._updateTextureImageData=function(j,i){var d=(i.width&i.width-1)||(i.height&i.height-1);var f=this._textureDictionary[i._storeID];j.activeTexture(j.TEXTURE0+f._activeIndex);j.bindTexture(j.TEXTURE_2D,f);f.isPOT=!d;this.setTextureParams(j,f.isPOT);try{j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,i)}catch(h){var g="\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins";if(console.error){console.error(g);console.error(h)}else{if(console){console.log(g);console.log(h)}}}i._invalid=false;f._w=i.width;f._h=i.height;if(this.vocalDebug){if(d){console.warn("NPOT(Non Power of Two) Texture: "+i.src)}if(i.width>j.MAX_TEXTURE_SIZE||i.height>j.MAX_TEXTURE_SIZE){console&&console.error("Oversized Texture: "+i.width+"x"+i.height+" vs "+j.MAX_TEXTURE_SIZE+"max")}}};b._insertTextureInBatch=function(h,d){if(this._batchTextures[d._activeIndex]!==d){var f=-1;var i=(this._lastTextureInsert+1)%this._batchTextureCount;var e=i;do{if(this._batchTextures[e]._batchID!=this._batchID&&!this._slotBlacklist[e]){f=e;break}e=(e+1)%this._batchTextureCount}while(e!==i);if(f===-1){this.batchReason="textureOverflow";this._drawBuffers(h);this.batchCardCount=0;f=i}this._batchTextures[f]=d;d._activeIndex=f;var g=d._imageData;if(g&&g._invalid&&d._drawID!==undefined){this._updateTextureImageData(h,g)}else{h.activeTexture(h.TEXTURE0+f);h.bindTexture(h.TEXTURE_2D,d);this.setTextureParams(h)}this._lastTextureInsert=f}else{var g=d._imageData;if(d._storeID!=undefined&&g&&g._invalid){this._updateTextureImageData(h,g)}}d._drawID=this._drawID;d._batchID=this._batchID};b._killTextureObject=function(d){if(!d){return}var g=this._webGLContext;if(d._storeID!==undefined&&d._storeID>=0){this._textureDictionary[d._storeID]=undefined;for(var h in this._textureIDs){if(this._textureIDs[h]==d._storeID){delete this._textureIDs[h]}}if(d._imageData){d._imageData._storeID=undefined}d._imageData=d._storeID=undefined}if(d._activeIndex!==undefined&&this._batchTextures[d._activeIndex]===d){this._batchTextures[d._activeIndex]=this._baseTextures[d._activeIndex]}try{if(d._frameBuffer){g.deleteFramebuffer(d._frameBuffer)}d._frameBuffer=undefined}catch(f){if(this.vocalDebug){console.log(f)}}try{g.deleteTexture(d)}catch(f){if(this.vocalDebug){console.log(f)}}};b._backupBatchTextures=function(e,g){var f=this._webGLContext;if(!this._backupTextures){this._backupTextures=[]}if(g===undefined){g=this._backupTextures}for(var d=0;d<this._batchTextureCount;d++){f.activeTexture(f.TEXTURE0+d);if(e){this._batchTextures[d]=g[d]}else{g[d]=this._batchTextures[d];this._batchTextures[d]=this._baseTextures[d]}f.bindTexture(f.TEXTURE_2D,this._batchTextures[d]);this.setTextureParams(f,this._batchTextures[d].isPOT)}if(e&&g===this._backupTextures){this._backupTextures=[]}};b._batchDraw=function(d,f,e){if(this._isDrawing>0){this._drawBuffers(f)}this._isDrawing++;this._drawID++;this.batchCardCount=0;this.depth=0;this._appendToBatchGroup(d,f,new createjs.Matrix2D(),this.alpha,e);this.batchReason="drawFinish";this._drawBuffers(f);this._isDrawing--};b._cacheDraw=function(i,e,k,h){var j;var o=this._activeShader;var m=this._slotBlacklist;var f=this._maxTextureSlots-1;var g=this._viewportWidth,n=this._viewportHeight;this.protectTextureSlot(f,true);var d=e.getMatrix();d=d.clone();d.scale(1/h.scale,1/h.scale);d=d.invert();d.translate(-h.offX/h.scale*e.scaleX,-h.offY/h.scale*e.scaleY);var l=this._cacheContainer;l.children=[e];l.transformMatrix=d;this._backupBatchTextures(false);if(k&&k.length){this._drawFilters(e,k,h)}else{if(this.isCacheControlled){i.clear(i.COLOR_BUFFER_BIT);this._batchDraw(l,i,true)}else{i.activeTexture(i.TEXTURE0+f);e.cacheCanvas=this.getTargetRenderTexture(e,h._drawWidth,h._drawHeight);j=e.cacheCanvas;i.bindFramebuffer(i.FRAMEBUFFER,j._frameBuffer);this.updateViewport(h._drawWidth,h._drawHeight);this._projectionMatrix=this._projectionMatrixFlip;i.clear(i.COLOR_BUFFER_BIT);this._batchDraw(l,i,true);i.bindFramebuffer(i.FRAMEBUFFER,null);this.updateViewport(g,n)}}this._backupBatchTextures(true);this.protectTextureSlot(f,false);this._activeShader=o;this._slotBlacklist=m};b._drawFilters=function(d,m,h){var k=this._webGLContext;var l;var e=this._maxTextureSlots-1;var g=this._viewportWidth,p=this._viewportHeight;var o=this._cacheContainer;var f=m.length;k.activeTexture(k.TEXTURE0+e);l=this.getTargetRenderTexture(d,h._drawWidth,h._drawHeight);k.bindFramebuffer(k.FRAMEBUFFER,l._frameBuffer);this.updateViewport(h._drawWidth,h._drawHeight);k.clear(k.COLOR_BUFFER_BIT);this._batchDraw(o,k,true);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,l);this.setTextureParams(k);var q=false;var j=0,n=m[j];do{this._activeShader=this.getFilterShader(n);if(!this._activeShader){continue}k.activeTexture(k.TEXTURE0+e);l=this.getTargetRenderTexture(d,h._drawWidth,h._drawHeight);k.bindFramebuffer(k.FRAMEBUFFER,l._frameBuffer);k.viewport(0,0,h._drawWidth,h._drawHeight);k.clear(k.COLOR_BUFFER_BIT);this._drawCover(k,q);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,l);this.setTextureParams(k);if(f>1||m[0]._multiPass){q=!q}n=n._multiPass!==null?n._multiPass:m[++j]}while(n);if(this.isCacheControlled){k.bindFramebuffer(k.FRAMEBUFFER,null);this.updateViewport(g,p);this._activeShader=this.getFilterShader(this);k.clear(k.COLOR_BUFFER_BIT);this._drawCover(k,q)}else{if(q){k.activeTexture(k.TEXTURE0+e);l=this.getTargetRenderTexture(d,h._drawWidth,h._drawHeight);k.bindFramebuffer(k.FRAMEBUFFER,l._frameBuffer);this._activeShader=this.getFilterShader(this);k.viewport(0,0,h._drawWidth,h._drawHeight);k.clear(k.COLOR_BUFFER_BIT);this._drawCover(k,!q)}k.bindFramebuffer(k.FRAMEBUFFER,null);this.updateViewport(g,p);d.cacheCanvas=l}};b._appendToBatchGroup=function(e,y,C,B,F){if(!e._glMtx){e._glMtx=new createjs.Matrix2D()}var j=e._glMtx;j.copy(C);if(e.transformMatrix){j.appendMatrix(e.transformMatrix)}else{j.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)}var u,p,s,z;var w=e.children.length;for(var x=0;x<w;x++){var E=e.children[x];if(!(E.visible&&B)){continue}if(!E.cacheCanvas||F){if(E._updateState){E._updateState()}if(E.children){this._appendToBatchGroup(E,y,j,E.alpha*B);continue}}if(this.batchCardCount+1>this._maxCardsPerBatch){this.batchReason="vertexOverflow";this._drawBuffers(y);this.batchCardCount=0}if(!E._glMtx){E._glMtx=new createjs.Matrix2D()}var g=E._glMtx;g.copy(j);if(E.transformMatrix){g.appendMatrix(E.transformMatrix)}else{g.appendTransform(E.x,E.y,E.scaleX,E.scaleY,E.rotation,E.skewX,E.skewY,E.regX,E.regY)}var d,A,v,t,G,n;var D=E.cacheCanvas&&!F;if(E._webGLRenderStyle===2||D){v=(F?false:E.cacheCanvas)||E.image}else{if(E._webGLRenderStyle===1){t=E.spriteSheet.getFrame(E.currentFrame);if(t===null){continue}v=t.image}else{continue}}var r=this._uvs;var h=this._vertices;var q=this._indices;var k=this._alphas;if(!v){continue}if(v._storeID===undefined){G=this._loadTextureImage(y,v);this._insertTextureInBatch(y,G)}else{G=this._textureDictionary[v._storeID];if(!G){if(this.vocalDebug){console.log("Texture should not be looked up while not being stored.")}continue}if(G._batchID!==this._batchID){this._insertTextureInBatch(y,G)}}A=G._activeIndex;if(E._webGLRenderStyle===2||D){if(!D&&E.sourceRect){if(!E._uvRect){E._uvRect={}}n=E.sourceRect;d=E._uvRect;d.t=(n.y)/v.height;d.l=(n.x)/v.width;d.b=(n.y+n.height)/v.height;d.r=(n.x+n.width)/v.width;u=0;p=0;s=n.width+u;z=n.height+p}else{d=c.UV_RECT;if(D){n=E.bitmapCache;u=n.x+(n._filterOffX/n.scale);p=n.y+(n._filterOffY/n.scale);s=(n._drawWidth/n.scale)+u;z=(n._drawHeight/n.scale)+p}else{u=0;p=0;s=v.width+u;z=v.height+p}}}else{if(E._webGLRenderStyle===1){var f=t.rect;d=t.uvRect;if(!d){d=c.buildUVRects(E.spriteSheet,E.currentFrame,false)}u=-t.regX;p=-t.regY;s=f.width-t.regX;z=f.height-t.regY}}var o=this.batchCardCount*c.INDICIES_PER_CARD;var m=o*2;h[m]=u*g.a+p*g.c+g.tx;h[m+1]=u*g.b+p*g.d+g.ty;h[m+2]=u*g.a+z*g.c+g.tx;h[m+3]=u*g.b+z*g.d+g.ty;h[m+4]=s*g.a+p*g.c+g.tx;h[m+5]=s*g.b+p*g.d+g.ty;h[m+6]=h[m+2];h[m+7]=h[m+3];h[m+8]=h[m+4];h[m+9]=h[m+5];h[m+10]=s*g.a+z*g.c+g.tx;h[m+11]=s*g.b+z*g.d+g.ty;r[m]=d.l;r[m+1]=d.t;r[m+2]=d.l;r[m+3]=d.b;r[m+4]=d.r;r[m+5]=d.t;r[m+6]=d.l;r[m+7]=d.b;r[m+8]=d.r;r[m+9]=d.t;r[m+10]=d.r;r[m+11]=d.b;q[o]=q[o+1]=q[o+2]=q[o+3]=q[o+4]=q[o+5]=A;k[o]=k[o+1]=k[o+2]=k[o+3]=k[o+4]=k[o+5]=E.alpha*B;this.batchCardCount++}};b._drawBuffers=function(k){if(this.batchCardCount<=0){return}if(this.vocalDebug){console.log("Draw["+this._drawID+":"+this._batchID+"] : "+this.batchReason)}var l=this._activeShader;var h=this._vertexPositionBuffer;var e=this._textureIndexBuffer;var f=this._uvPositionBuffer;var j=this._alphaBuffer;k.useProgram(l);k.bindBuffer(k.ARRAY_BUFFER,h);k.vertexAttribPointer(l.vertexPositionAttribute,h.itemSize,k.FLOAT,false,0,0);k.bufferSubData(k.ARRAY_BUFFER,0,this._vertices);k.bindBuffer(k.ARRAY_BUFFER,e);k.vertexAttribPointer(l.textureIndexAttribute,e.itemSize,k.FLOAT,false,0,0);k.bufferSubData(k.ARRAY_BUFFER,0,this._indices);k.bindBuffer(k.ARRAY_BUFFER,f);k.vertexAttribPointer(l.uvPositionAttribute,f.itemSize,k.FLOAT,false,0,0);k.bufferSubData(k.ARRAY_BUFFER,0,this._uvs);k.bindBuffer(k.ARRAY_BUFFER,j);k.vertexAttribPointer(l.alphaAttribute,j.itemSize,k.FLOAT,false,0,0);k.bufferSubData(k.ARRAY_BUFFER,0,this._alphas);k.uniformMatrix4fv(l.pMatrixUniform,k.FALSE,this._projectionMatrix);for(var g=0;g<this._batchTextureCount;g++){var d=this._batchTextures[g];k.activeTexture(k.TEXTURE0+g);k.bindTexture(k.TEXTURE_2D,d);this.setTextureParams(k,d.isPOT)}k.drawArrays(k.TRIANGLES,0,this.batchCardCount*c.INDICIES_PER_CARD);this._batchID++};b._drawCover=function(g,e){if(this._isDrawing>0){this._drawBuffers(g)}if(this.vocalDebug){console.log("Draw["+this._drawID+":"+this._batchID+"] : Cover")}var h=this._activeShader;var f=this._vertexPositionBuffer;var d=this._uvPositionBuffer;g.clear(g.COLOR_BUFFER_BIT);g.useProgram(h);g.bindBuffer(g.ARRAY_BUFFER,f);g.vertexAttribPointer(h.vertexPositionAttribute,f.itemSize,g.FLOAT,false,0,0);g.bufferSubData(g.ARRAY_BUFFER,0,c.COVER_VERT);g.bindBuffer(g.ARRAY_BUFFER,d);g.vertexAttribPointer(h.uvPositionAttribute,d.itemSize,g.FLOAT,false,0,0);g.bufferSubData(g.ARRAY_BUFFER,0,e?c.COVER_UV_FLIP:c.COVER_UV);g.uniform1i(h.samplerUniform,0);g.uniform1f(h.uprightUniform,e?0:1);g.drawArrays(g.TRIANGLES,0,c.INDICIES_PER_CARD)};createjs.StageGL=createjs.promote(c,"Stage")}());this.createjs=this.createjs||{};(function(){function a(c){this.DisplayObject_constructor();if(typeof c=="string"){this.image=document.createElement("img");this.image.src=c}else{this.image=c}this.sourceRect=null;this._webGLRenderStyle=createjs.DisplayObject._StageGL_BITMAP}var b=createjs.extend(a,createjs.DisplayObject);b.initialize=a;b.isVisible=function(){var d=this.image;var c=this.cacheCanvas||(d&&(d.naturalWidth||d.getContext||d.readyState>=2));return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&c)};b.draw=function(o,d){if(this.DisplayObject_draw(o,d)){return true}var f=this.image,k=this.sourceRect;if(f.getImage){f=f.getImage()}if(!f){return true}if(k){var e=k.x,m=k.y,c=e+k.width,j=m+k.height,l=0,i=0,n=f.width,g=f.height;if(e<0){l-=e;e=0}if(c>n){c=n}if(m<0){i-=m;m=0}if(j>g){j=g}o.drawImage(f,e,m,c-e,j-m,l,i,c-e,j-m)}else{o.drawImage(f,0,0)}return true};b.getBounds=function(){var d=this.DisplayObject_getBounds();if(d){return d}var e=this.image,f=this.sourceRect||e;var c=(e&&(e.naturalWidth||e.getContext||e.readyState>=2));return c?this._rectangle.setValues(0,0,f.width,f.height):null};b.clone=function(c){var d=this.image;if(d&&c){d=d.cloneNode()}var e=new a(d);if(this.sourceRect){e.sourceRect=this.sourceRect.clone()}this._cloneProps(e);return e};b.toString=function(){return"[Bitmap (name="+this.name+")]"};createjs.Bitmap=createjs.promote(a,"DisplayObject")}());this.createjs=this.createjs||{};(function(){function a(d,c){this.DisplayObject_constructor();this.currentFrame=0;this.currentAnimation=null;this.paused=true;this.spriteSheet=d;this.currentAnimationFrame=0;this.framerate=0;this._animation=null;this._currentFrame=null;this._skipAdvance=false;this._webGLRenderStyle=createjs.DisplayObject._StageGL_SPRITE;if(c!=null){this.gotoAndPlay(c)}}var b=createjs.extend(a,createjs.DisplayObject);b.initialize=a;b.isVisible=function(){var c=this.cacheCanvas||this.spriteSheet.complete;return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&c)};b.draw=function(c,e){if(this.DisplayObject_draw(c,e)){return true}this._normalizeFrame();var f=this.spriteSheet.getFrame(this._currentFrame|0);if(!f){return false}var d=f.rect;if(d.width&&d.height){c.drawImage(f.image,d.x,d.y,d.width,d.height,-f.regX,-f.regY,d.width,d.height)}return true};b.play=function(){this.paused=false};b.stop=function(){this.paused=true};b.gotoAndPlay=function(c){this.paused=false;this._skipAdvance=true;this._goto(c)};b.gotoAndStop=function(c){this.paused=true;this._goto(c)};b.advance=function(e){var d=this.framerate||this.spriteSheet.framerate;var c=(d&&e!=null)?e/(1000/d):1;this._normalizeFrame(c)};b.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)};b.clone=function(){return this._cloneProps(new a(this.spriteSheet))};b.toString=function(){return"[Sprite (name="+this.name+")]"};b._cloneProps=function(c){this.DisplayObject__cloneProps(c);c.currentFrame=this.currentFrame;c.currentAnimation=this.currentAnimation;c.paused=this.paused;c.currentAnimationFrame=this.currentAnimationFrame;c.framerate=this.framerate;c._animation=this._animation;c._currentFrame=this._currentFrame;c._skipAdvance=this._skipAdvance;return c};b._tick=function(c){if(!this.paused){if(!this._skipAdvance){this.advance(c&&c.delta)}this._skipAdvance=false}this.DisplayObject__tick(c)};b._normalizeFrame=function(d){d=d||0;var h=this._animation;var e=this.paused;var j=this._currentFrame;var c;if(h){var g=h.speed||1;var i=this.currentAnimationFrame;c=h.frames.length;if(i+d*g>=c){var f=h.next;if(this._dispatchAnimationEnd(h,j,e,f,c-1)){return}else{if(f){return this._goto(f,d-(c-i)/g)}else{this.paused=true;i=h.frames.length-1}}}else{i+=d*g}this.currentAnimationFrame=i;this._currentFrame=h.frames[i|0]}else{j=(this._currentFrame+=d);c=this.spriteSheet.getNumFrames();if(j>=c&&c>0){if(!this._dispatchAnimationEnd(h,j,e,c-1)){if((this._currentFrame-=c)>=c){return this._normalizeFrame()}}}}j=this._currentFrame|0;if(this.currentFrame!=j){this.currentFrame=j;this.dispatchEvent("change")}};b._dispatchAnimationEnd=function(h,j,f,g,d){var e=h?h.name:null;if(this.hasEventListener("animationend")){var c=new createjs.Event("animationend");c.name=e;c.next=g;this.dispatchEvent(c)}var i=(this._animation!=h||this._currentFrame!=j);if(!i&&!f&&this.paused){this.currentAnimationFrame=d;i=true}return i};b._goto=function(c,e){this.currentAnimationFrame=0;if(isNaN(c)){var d=this.spriteSheet.getAnimation(c);if(d){this._animation=d;this.currentAnimation=c;this._normalizeFrame(e)}}else{this.currentAnimation=this._animation=null;this._currentFrame=c;this._normalizeFrame()}};createjs.Sprite=createjs.promote(a,"DisplayObject")}());this.createjs=this.createjs||{};(function(){function b(c){this.DisplayObject_constructor();this.graphics=c?c:new createjs.Graphics()}var a=createjs.extend(b,createjs.DisplayObject);a.isVisible=function(){var c=this.cacheCanvas||(this.graphics&&!this.graphics.isEmpty());return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&c)};a.draw=function(c,d){if(this.DisplayObject_draw(c,d)){return true}this.graphics.draw(c,this);return true};a.clone=function(c){var d=(c&&this.graphics)?this.graphics.clone():this.graphics;return this._cloneProps(new b(d))};a.toString=function(){return"[Shape (name="+this.name+")]"};createjs.Shape=createjs.promote(b,"DisplayObject")}());this.createjs=this.createjs||{};(function(){function b(f,e,d){this.DisplayObject_constructor();this.text=f;this.font=e;this.color=d;this.textAlign="left";this.textBaseline="top";this.maxWidth=null;this.outline=0;this.lineHeight=0;this.lineWidth=null}var c=createjs.extend(b,createjs.DisplayObject);var a=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"));if(a.getContext){b._workingContext=a.getContext("2d");a.width=a.height=1}b.H_OFFSETS={start:0,left:0,center:-0.5,end:-1,right:-1};b.V_OFFSETS={top:0,hanging:-0.01,middle:-0.4,alphabetic:-0.8,ideographic:-0.85,bottom:-1};c.isVisible=function(){var d=this.cacheCanvas||(this.text!=null&&this.text!=="");return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&d)};c.draw=function(d,f){if(this.DisplayObject_draw(d,f)){return true}var e=this.color||"#000";if(this.outline){d.strokeStyle=e;d.lineWidth=this.outline*1}else{d.fillStyle=e}this._drawText(this._prepContext(d));return true};c.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)};c.getMeasuredLineHeight=function(){return this._getMeasuredWidth("M")*1.2};c.getMeasuredHeight=function(){return this._drawText(null,{}).height};c.getBounds=function(){var g=this.DisplayObject_getBounds();if(g){return g}if(this.text==null||this.text===""){return null}var h=this._drawText(null,{});var e=(this.maxWidth&&this.maxWidth<h.width)?this.maxWidth:h.width;var d=e*b.H_OFFSETS[this.textAlign||"left"];var f=this.lineHeight||this.getMeasuredLineHeight();var i=f*b.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(d,i,e,h.height)};c.getMetrics=function(){var d={lines:[]};d.lineHeight=this.lineHeight||this.getMeasuredLineHeight();d.vOffset=d.lineHeight*b.V_OFFSETS[this.textBaseline||"top"];return this._drawText(null,d,d.lines)};c.clone=function(){return this._cloneProps(new b(this.text,this.font,this.color))};c.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};c._cloneProps=function(d){this.DisplayObject__cloneProps(d);d.textAlign=this.textAlign;d.textBaseline=this.textBaseline;d.maxWidth=this.maxWidth;d.outline=this.outline;d.lineHeight=this.lineHeight;d.lineWidth=this.lineWidth;return d};c._prepContext=function(d){d.font=this.font||"10px sans-serif";d.textAlign=this.textAlign||"left";d.textBaseline=this.textBaseline||"top";d.lineJoin="miter";d.miterLimit=2.5;return d};c._drawText=function(v,e,x){var m=!!v;if(!m){v=b._workingContext;v.save();this._prepContext(v)}var t=this.lineHeight||this.getMeasuredLineHeight();var d=0,n=0;var u=String(this.text).split(/(?:\r\n|\r|\n)/);for(var k=0,f=u.length;k<f;k++){var q=u[k];var r=null;if(this.lineWidth!=null&&(r=v.measureText(q).width)>this.lineWidth){var p=q.split(/(\s)/);q=p[0];r=v.measureText(q).width;for(var g=1,h=p.length;g<h;g+=2){var s=v.measureText(p[g]+p[g+1]).width;if(r+s>this.lineWidth){if(m){this._drawTextLine(v,q,n*t)}if(x){x.push(q)}if(r>d){d=r}q=p[g+1];r=v.measureText(q).width;n++}else{q+=p[g]+p[g+1];r+=s}}}if(m){this._drawTextLine(v,q,n*t)}if(x){x.push(q)}if(e&&r==null){r=v.measureText(q).width}if(r>d){d=r}n++}if(e){e.width=d;e.height=n*t}if(!m){v.restore()}return e};c._drawTextLine=function(d,e,f){if(this.outline){d.strokeText(e,0,f,this.maxWidth||65535)}else{d.fillText(e,0,f,this.maxWidth||65535)}};c._getMeasuredWidth=function(f){var e=b._workingContext;e.save();var d=this._prepContext(e).measureText(f).width;e.restore();return d};createjs.Text=createjs.promote(b,"DisplayObject")}());this.createjs=this.createjs||{};(function(){function a(d,c){this.Container_constructor();this.text=d||"";this.spriteSheet=c;this.lineHeight=0;this.letterSpacing=0;this.spaceWidth=0;this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};this._oldStage=null;this._drawAction=null}var b=createjs.extend(a,createjs.Container);a.maxPoolSize=100;a._spritePool=[];b.draw=function(c,d){if(this.DisplayObject_draw(c,d)){return}this._updateState();this.Container_draw(c,d)};b.getBounds=function(){this._updateText();return this.Container_getBounds()};b.isVisible=function(){var c=this.cacheCanvas||(this.spriteSheet&&this.spriteSheet.complete&&this.text);return !!(this.visible&&this.alpha>0&&this.scaleX!==0&&this.scaleY!==0&&c)};b.clone=function(){return this._cloneProps(new a(this.text,this.spriteSheet))};b.addChild=b.addChildAt=b.removeChild=b.removeChildAt=b.removeAllChildren=function(){};b._updateState=function(){this._updateText()};b._cloneProps=function(c){this.Container__cloneProps(c);c.lineHeight=this.lineHeight;c.letterSpacing=this.letterSpacing;c.spaceWidth=this.spaceWidth;return c};b._getFrameIndex=function(e,d){var g,f=d.getAnimation(e);if(!f){(e!=(g=e.toUpperCase()))||(e!=(g=e.toLowerCase()))||(g=null);if(g){f=d.getAnimation(g)}}return f&&f.frames[0]};b._getFrame=function(e,c){var d=this._getFrameIndex(e,c);return d==null?d:c.getFrame(d)};b._getLineHeight=function(c){var d=this._getFrame("1",c)||this._getFrame("T",c)||this._getFrame("L",c)||c.getFrame(0);return d?d.rect.height:1};b._getSpaceWidth=function(c){var d=this._getFrame("1",c)||this._getFrame("l",c)||this._getFrame("e",c)||this._getFrame("a",c)||c.getFrame(0);return d?d.rect.width:1};b._updateText=function(){var j=0,h=0,q=this._oldProps,d=false,m=this.spaceWidth,z=this.lineHeight,t=this.spriteSheet;var k=a._spritePool,p=this.children,v=0,e=p.length,w;for(var r in q){if(q[r]!=this[r]){q[r]=this[r];d=true}}if(!d){return}var g=!!this._getFrame(" ",t);if(!g&&!m){m=this._getSpaceWidth(t)}if(!z){z=this._getLineHeight(t)}for(var u=0,s=this.text.length;u<s;u++){var c=this.text.charAt(u);if(c==" "&&!g){j+=m;continue}else{if(c=="\n"||c=="\r"){if(c=="\r"&&this.text.charAt(u+1)=="\n"){u++}j=0;h+=z;continue}}var f=this._getFrameIndex(c,t);if(f==null){continue}if(v<e){w=p[v]}else{p.push(w=k.length?k.pop():new createjs.Sprite());w.parent=this;e++}w.spriteSheet=t;w.gotoAndStop(f);w.x=j;w.y=h;v++;j+=w.getBounds().width+this.letterSpacing}while(e>v){k.push(w=p.pop());w.parent=null;e--}if(k.length>a.maxPoolSize){k.length=a.maxPoolSize}};createjs.BitmapText=createjs.promote(a,"Container")}());this.createjs=this.createjs||{};(function(){function d(g){this.Container_constructor();!d.inited&&d.init();var i,f,e,h;if(g instanceof String||arguments.length>1){i=g;f=arguments[1];e=arguments[2];h=arguments[3];if(e==null){e=-1}g=null}else{if(g){i=g.mode;f=g.startPosition;e=g.loop;h=g.labels}}if(!g){g={labels:h}}this.mode=i||d.INDEPENDENT;this.startPosition=f||0;this.loop=e===true?-1:(e||0);this.currentFrame=0;this.paused=g.paused||false;this.actionsEnabled=true;this.autoReset=true;this.frameBounds=this.frameBounds||g.frameBounds;this.framerate=null;g.useTicks=g.paused=true;this.timeline=new createjs.Timeline(g);this._synchOffset=0;this._rawPosition=-1;this._bound_resolveState=this._resolveState.bind(this);this._t=0;this._managed={}}var c=createjs.extend(d,createjs.Container);d.INDEPENDENT="independent";d.SINGLE_FRAME="single";d.SYNCHED="synched";d.inited=false;d.init=function(){if(d.inited){return}a.install();d.inited=true};c._getLabels=function(){return this.timeline.getLabels()};c.getLabels=createjs.deprecate(c._getLabels,"MovieClip.getLabels");c._getCurrentLabel=function(){return this.timeline.currentLabel};c.getCurrentLabel=createjs.deprecate(c._getCurrentLabel,"MovieClip.getCurrentLabel");c._getDuration=function(){return this.timeline.duration};c.getDuration=createjs.deprecate(c._getDuration,"MovieClip.getDuration");try{Object.defineProperties(c,{labels:{get:c._getLabels},currentLabel:{get:c._getCurrentLabel},totalFrames:{get:c._getDuration},duration:{get:c._getDuration}})}catch(b){}c.initialize=d;c.isVisible=function(){return !!(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0)};c.draw=function(e,f){if(this.DisplayObject_draw(e,f)){return true}this._updateState();this.Container_draw(e,f);return true};c.play=function(){this.paused=false};c.stop=function(){this.paused=true};c.gotoAndPlay=function(e){this.paused=false;this._goto(e)};c.gotoAndStop=function(e){this.paused=true;this._goto(e)};c.advance=function(h){var e=d.INDEPENDENT;if(this.mode!==e){return}var j=this,g=j.framerate;while((j=j.parent)&&g===null){if(j.mode===e){g=j._framerate}}this._framerate=g;if(this.paused){return}var f=(g!==null&&g!==-1&&h!==null)?h/(1000/g)+this._t:1;var i=f|0;this._t=f-i;while(i--){this._updateTimeline(this._rawPosition+1,false)}};c.clone=function(){throw ("MovieClip cannot be cloned.")};c.toString=function(){return"[MovieClip (name="+this.name+")]"};c._updateState=function(){if(this._rawPosition===-1||this.mode!==d.INDEPENDENT){this._updateTimeline(-1)}};c._tick=function(e){this.advance(e&&e.delta);this.Container__tick(e)};c._goto=function(e){var f=this.timeline.resolve(e);if(f==null){return}this._t=0;this._updateTimeline(f,true)};c._reset=function(){this._rawPosition=-1;this._t=this.currentFrame=0;this.paused=false};c._updateTimeline=function(g,e){var h=this.mode!==d.INDEPENDENT,f=this.timeline;if(h){g=this.startPosition+(this.mode===d.SINGLE_FRAME?0:this._synchOffset)}if(g<0){g=0}if(this._rawPosition===g&&!h){return}this._rawPosition=g;f.loop=this.loop;f.setPosition(g,h||!this.actionsEnabled,e,this._bound_resolveState)};c._renderFirstFrame=function(){var e=this.timeline,f=e.rawPosition;e.setPosition(0,true,true,this._bound_resolveState);e.rawPosition=f};c._resolveState=function(){var q=this.timeline;this.currentFrame=q.position;for(var j in this._managed){this._managed[j]=1}var h=q.tweens;for(var o=0,k=h.length;o<k;o++){var p=h[o],g=p.target;if(g===this||p.passive){continue}var m=p._stepPosition;if(g instanceof createjs.DisplayObject){this._addManagedChild(g,m)}else{this._setState(g.state,m)}}var f=this.children;for(o=f.length-1;o>=0;o--){var e=f[o].id;if(this._managed[e]===1){this.removeChildAt(o);delete (this._managed[e])}}};c._setState=function(g,j){if(!g){return}for(var e=g.length-1;e>=0;e--){var h=g[e];var l=h.t;var f=h.p;for(var k in f){l[k]=f[k]}this._addManagedChild(l,j)}};c._addManagedChild=function(f,e){if(f._off){return}this.addChildAt(f,0);if(f instanceof d){f._synchOffset=e;if(f.mode===d.INDEPENDENT&&f.autoReset&&(!this._managed[f.id])){f._reset()}}this._managed[f.id]=2};c._getBounds=function(g,f){var e=this.DisplayObject_getBounds();if(!e){if(this.frameBounds){e=this._rectangle.copy(this.frameBounds[this.currentFrame])}}if(e){return this._transformBounds(e,g,f)}return this.Container__getBounds(g,f)};createjs.MovieClip=createjs.promote(d,"Container");function a(){throw ("MovieClipPlugin cannot be instantiated.")}a.priority=100;a.ID="MovieClip";a.install=function(){createjs.Tween._installPlugin(a)};a.init=function(e,g,f){if(g==="startPosition"&&e.target instanceof d){e._addPlugin(a)}};a.step=function(e,g,f){};a.change=function(f,h,j,i,g,e){if(j==="startPosition"){return(g===1?h.props[j]:h.prev.props[j])}}}());this.createjs=this.createjs||{};(function(){function a(){throw"SpriteSheetUtils cannot be instantiated"}var b=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"));if(b.getContext){a._workingCanvas=b;a._workingContext=b.getContext("2d");b.width=b.height=1}a.extractFrame=function(e,d){if(isNaN(d)){d=e.getAnimation(d).frames[0]}var h=e.getFrame(d);if(!h){return null}var g=h.rect;var f=a._workingCanvas;f.width=g.width;f.height=g.height;a._workingContext.drawImage(h.image,g.x,g.y,g.width,g.height,0,0,g.width,g.height);var c=document.createElement("img");c.src=f.toDataURL("image/png");return c};a.addFlippedFrames=createjs.deprecate(null,"SpriteSheetUtils.addFlippedFrames");a.mergeAlpha=createjs.deprecate(null,"SpriteSheetUtils.mergeAlpha");a._flip=function(A,f,z,n){var p=A._images;var g=a._workingCanvas;var s=a._workingContext;var m=p.length/f;for(var x=0;x<m;x++){var e=p[x];e.__tmp=x;s.setTransform(1,0,0,1,0,0);s.clearRect(0,0,g.width+1,g.height+1);g.width=e.width;g.height=e.height;s.setTransform(z?-1:1,0,0,n?-1:1,z?e.width:0,n?e.height:0);s.drawImage(e,0,0);var D=document.createElement("img");D.src=g.toDataURL("image/png");D.width=(e.width||e.naturalWidth);D.height=(e.height||e.naturalHeight);p.push(D)}var c=A._frames;var k=c.length/f;for(x=0;x<k;x++){e=c[x];var d=e.rect.clone();D=p[e.image.__tmp+m*f];var o={image:D,rect:d,regX:e.regX,regY:e.regY};if(z){d.x=(D.width||D.naturalWidth)-d.x-d.width;o.regX=d.width-e.regX}if(n){d.y=(D.height||D.naturalHeight)-d.y-d.height;o.regY=d.height-e.regY}c.push(o)}var y="_"+(z?"h":"")+(n?"v":"");var q=A._animations;var B=A._data;var u=q.length/f;for(x=0;x<u;x++){var C=q[x];e=B[C];var t={name:C+y,speed:e.speed,next:e.next,frames:[]};if(e.next){t.next+=y}c=e.frames;for(var w=0,r=c.length;w<r;w++){t.frames.push(c[w]+k*f)}B[t.name]=t;q.push(t.name)}};createjs.SpriteSheetUtils=a}());this.createjs=this.createjs||{};(function(){function a(c){this.EventDispatcher_constructor();this.maxWidth=2048;this.maxHeight=2048;this.spriteSheet=null;this.scale=1;this.padding=1;this.timeSlice=0.3;this.progress=-1;this.framerate=c||0;this._frames=[];this._animations={};this._data=null;this._nextFrameIndex=0;this._index=0;this._timerID=null;this._scale=1}var b=createjs.extend(a,createjs.EventDispatcher);a.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions";a.ERR_RUNNING="a build is already running";b.addFrame=function(d,f,h,c,e){if(this._data){throw a.ERR_RUNNING}var g=f||d.bounds||d.nominalBounds;if(!g&&d.getBounds){g=d.getBounds()}if(!g){return null}h=h||1;return this._frames.push({source:d,sourceRect:g,scale:h,funct:c,data:e,index:this._frames.length,height:g.height*h})-1};b.addAnimation=function(c,f,d,e){if(this._data){throw a.ERR_RUNNING}this._animations[c]={frames:f,next:d,speed:e}};b.addMovieClip=function(A,k,B,s,p,g){if(this._data){throw a.ERR_RUNNING}var f=A.frameBounds;var d=k||A.bounds||A.nominalBounds;if(!d&&A.getBounds){d=A.getBounds()}if(!d&&!f){return}var z,x,o=this._frames.length;var q=A.timeline.duration;for(z=0;z<q;z++){var t=(f&&f[z])?f[z]:d;this.addFrame(A,t,B,this._setupMovieClipFrame,{i:z,f:s,d:p})}var w=A.timeline._labels;var u=[];for(var v in w){u.push({index:w[v],label:v})}if(u.length){u.sort(function(j,i){return j.index-i.index});for(z=0,x=u.length;z<x;z++){var m=u[z].label;var h=o+u[z].index;var e=o+((z==x-1)?q:u[z+1].index);var c=[];for(var y=h;y<e;y++){c.push(y)}if(g){m=g(m,A,h,e);if(!m){continue}}this.addAnimation(m,c,true)}}};b.build=function(){if(this._data){throw a.ERR_RUNNING}this._startBuild();while(this._drawNext()){}this._endBuild();return this.spriteSheet};b.buildAsync=function(c){if(this._data){throw a.ERR_RUNNING}this.timeSlice=c;this._startBuild();var d=this;this._timerID=setTimeout(function(){d._run()},50-Math.max(0.01,Math.min(0.99,this.timeSlice||0.3))*50)};b.stopAsync=function(){clearTimeout(this._timerID);this._data=null};b.clone=function(){throw ("SpriteSheetBuilder cannot be cloned.")};b.toString=function(){return"[SpriteSheetBuilder]"};b._startBuild=function(){var g=this.padding||0;this.progress=0;this.spriteSheet=null;this._index=0;this._scale=this.scale;var d=[];this._data={images:[],frames:d,framerate:this.framerate,animations:this._animations};var i=this._frames.slice();i.sort(function(l,k){return(l.height<=k.height)?-1:1});if(i[i.length-1].height+g*2>this.maxHeight){throw a.ERR_DIMENSIONS}var j=0,c=0;var e=0;while(i.length){var h=this._fillRow(i,j,e,d,g);if(h.w>c){c=h.w}j+=h.h;if(!h.h||!i.length){var f=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");f.width=this._getSize(c,this.maxWidth);f.height=this._getSize(j,this.maxHeight);this._data.images[e]=f;if(!h.h){c=j=0;e++}}}};b._setupMovieClipFrame=function(c,e){var d=c.actionsEnabled;c.actionsEnabled=false;c.gotoAndStop(e.i);c.actionsEnabled=d;e.f&&e.f(c,e.d,e.i)};b._getSize=function(d,c){var e=4;while(Math.pow(2,++e)<d){}return Math.min(c,Math.pow(2,e))};b._fillRow=function(d,l,z,q,t){var n=this.maxWidth;var f=this.maxHeight;l+=t;var s=f-l;var m=t;var v=0;for(var r=d.length-1;r>=0;r--){var o=d[r];var c=this._scale*o.scale;var e=o.sourceRect;var u=o.source;var j=Math.floor(c*e.x-t);var g=Math.floor(c*e.y-t);var p=Math.ceil(c*e.height+t*2);var k=Math.ceil(c*e.width+t*2);if(k>n){throw a.ERR_DIMENSIONS}if(p>s||m+k>n){continue}o.img=z;o.rect=new createjs.Rectangle(m,l,k,p);v=v||p;d.splice(r,1);q[o.index]=[m,l,k,p,z,Math.round(-j+c*u.regX-t),Math.round(-g+c*u.regY-t)];m+=k}return{w:m,h:v}};b._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data);this._data=null;this.progress=1;this.dispatchEvent("complete")};b._run=function(){var f=Math.max(0.01,Math.min(0.99,this.timeSlice||0.3))*50;var d=(new Date()).getTime()+f;var e=false;while(d>(new Date()).getTime()){if(!this._drawNext()){e=true;break}}if(e){this._endBuild()}else{var h=this;this._timerID=setTimeout(function(){h._run()},50-f)}var g=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var c=new createjs.Event("progress");c.progress=g;this.dispatchEvent(c)}};b._drawNext=function(){var h=this._frames[this._index];var g=h.scale*this._scale;var f=h.rect;var d=h.sourceRect;var e=this._data.images[h.img];var c=e.getContext("2d");h.funct&&h.funct(h.source,h.data);c.save();c.beginPath();c.rect(f.x,f.y,f.width,f.height);c.clip();c.translate(Math.ceil(f.x-d.x*g),Math.ceil(f.y-d.y*g));c.scale(g,g);h.source.draw(c);c.restore();return(++this._index)<this._frames.length};createjs.SpriteSheetBuilder=createjs.promote(a,"EventDispatcher")}());this.createjs=this.createjs||{};(function(){function a(d){this.DisplayObject_constructor();if(typeof(d)=="string"){d=document.getElementById(d)}this.mouseEnabled=false;var c=d.style;c.position="absolute";c.transformOrigin=c.WebkitTransformOrigin=c.msTransformOrigin=c.MozTransformOrigin=c.OTransformOrigin="0% 0%";this.htmlElement=d;this._oldProps=null;this._oldStage=null;this._drawAction=null}var b=createjs.extend(a,createjs.DisplayObject);b.isVisible=function(){return this.htmlElement!=null};b.draw=function(c,d){return true};b.cache=function(){};b.uncache=function(){};b.updateCache=function(){};b.hitTest=function(){};b.localToGlobal=function(){};b.globalToLocal=function(){};b.localToLocal=function(){};b.clone=function(){throw ("DOMElement cannot be cloned.")};b.toString=function(){return"[DOMElement (name="+this.name+")]"};b._tick=function(d){var c=this.stage;if(c&&c!==this._oldStage){this._drawAction&&c.off("drawend",this._drawAction);this._drawAction=c.on("drawend",this._handleDrawEnd,this);this._oldStage=c}this.DisplayObject__tick(d)};b._handleDrawEnd=function(j){var f=this.htmlElement;if(!f){return}var d=f.style;var i=this.getConcatenatedDisplayProps(this._props),e=i.matrix;var c=i.visible?"visible":"hidden";if(c!=d.visibility){d.visibility=c}if(!i.visible){return}var k=this._oldProps,l=k&&k.matrix;var g=10000;if(!l||!l.equals(e)){var h="matrix("+(e.a*g|0)/g+","+(e.b*g|0)/g+","+(e.c*g|0)/g+","+(e.d*g|0)/g+","+(e.tx+0.5|0);d.transform=d.WebkitTransform=d.OTransform=d.msTransform=h+","+(e.ty+0.5|0)+")";d.MozTransform=h+"px,"+(e.ty+0.5|0)+"px)";if(!k){k=this._oldProps=new createjs.DisplayProps(true,null)}k.matrix.copy(e)}if(k.alpha!=i.alpha){d.opacity=""+(i.alpha*g|0)/g;k.alpha=i.alpha}};createjs.DOMElement=createjs.promote(a,"DisplayObject")}());this.createjs=this.createjs||{};(function(){function a(){this.usesContext=false;this._multiPass=null;this.VTX_SHADER_BODY=null;this.FRAG_SHADER_BODY=null}var b=a.prototype;b.getBounds=function(c){return c};b.shaderParamSetup=function(d,c,e){};b.applyFilter=function(l,j,i,d,k,g,m,c){g=g||l;if(m==null){m=j}if(c==null){c=i}try{var h=l.getImageData(j,i,d,k)}catch(f){return false}if(this._applyFilter(h)){g.putImageData(h,m,c);return true}return false};b.toString=function(){return"[Filter]"};b.clone=function(){return new a()};b._applyFilter=function(c){return true};createjs.Filter=a}());this.createjs=this.createjs||{};(function(){function a(){this.width=undefined;this.height=undefined;this.x=undefined;this.y=undefined;this.scale=1;this.offX=0;this.offY=0;this.cacheID=0;this._filterOffX=0;this._filterOffY=0;this._cacheDataURLID=0;this._cacheDataURL=null;this._drawWidth=0;this._drawHeight=0}var b=a.prototype;a.getFilterBounds=function(k,e){if(!e){e=new createjs.Rectangle()}var c=k.filters;var h=c&&c.length;if(!!h<=0){return e}for(var d=0;d<h;d++){var g=c[d];if(!g||!g.getBounds){continue}var j=g.getBounds();if(!j){continue}if(d==0){e.setValues(j.x,j.y,j.width,j.height)}else{e.extend(j.x,j.y,j.width,j.height)}}return e};b.toString=function(){return"[BitmapCache]"};b.define=function(i,c,h,e,f,g,d){if(!i){throw"No symbol to cache"}this._options=d;this.target=i;this.width=e>=1?e:1;this.height=f>=1?f:1;this.x=c||0;this.y=h||0;this.scale=g||1;this.update()};b.update=function(c){if(!this.target){throw"define() must be called before update()"}var e=a.getFilterBounds(this.target);var d=this.target.cacheCanvas;this._drawWidth=Math.ceil(this.width*this.scale)+e.width;this._drawHeight=Math.ceil(this.height*this.scale)+e.height;if(!d||this._drawWidth!=d.width||this._drawHeight!=d.height){this._updateSurface()}this._filterOffX=e.x;this._filterOffY=e.y;this.offX=this.x*this.scale+this._filterOffX;this.offY=this.y*this.scale+this._filterOffY;this._drawToCache(c);this.cacheID=this.cacheID?this.cacheID+1:1};b.release=function(){if(this._webGLCache){if(!this._webGLCache.isCacheControlled){if(this.__lastRT){this.__lastRT=undefined}if(this.__rtA){this._webGLCache._killTextureObject(this.__rtA)}if(this.__rtB){this._webGLCache._killTextureObject(this.__rtB)}if(this.target&&this.target.cacheCanvas){this._webGLCache._killTextureObject(this.target.cacheCanvas)}}this._webGLCache=false}else{var c=this.target.stage;if(c instanceof createjs.StageGL){c.releaseTexture(this.target.cacheCanvas)}}this.target=this.target.cacheCanvas=null;this.cacheID=this._cacheDataURLID=this._cacheDataURL=undefined;this.width=this.height=this.x=this.y=this.offX=this.offY=0;this.scale=1};b.getCacheDataURL=function(){var c=this.target&&this.target.cacheCanvas;if(!c){return null}if(this.cacheID!=this._cacheDataURLID){this._cacheDataURLID=this.cacheID;this._cacheDataURL=c.toDataURL?c.toDataURL():null}return this._cacheDataURL};b.draw=function(c){if(!this.target){return false}c.drawImage(this.target.cacheCanvas,this.x+(this._filterOffX/this.scale),this.y+(this._filterOffY/this.scale),this._drawWidth/this.scale,this._drawHeight/this.scale);return true};b._updateSurface=function(){if(!this._options||!this._options.useGL){var e=this.target.cacheCanvas;if(!e){e=this.target.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")}e.width=this._drawWidth;e.height=this._drawHeight;return}if(!this._webGLCache){if(this._options.useGL==="stage"){if(!(this.target.stage&&this.target.stage.isWebGL)){var c="Cannot use 'stage' for cache because the object's parent stage is ";c+=this.target.stage?"non WebGL.":"not set, please addChild to the correct stage.";throw c}this.target.cacheCanvas=true;this._webGLCache=this.target.stage}else{if(this._options.useGL==="new"){this.target.cacheCanvas=document.createElement("canvas");this._webGLCache=new createjs.StageGL(this.target.cacheCanvas,{antialias:true,transparent:true,autoPurge:-1});this._webGLCache.isCacheControlled=true}else{if(this._options.useGL instanceof createjs.StageGL){this.target.cacheCanvas=true;this._webGLCache=this._options.useGL;this._webGLCache.isCacheControlled=true}else{throw"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got "+this._options.useGL}}}}var e=this.target.cacheCanvas;var d=this._webGLCache;if(d.isCacheControlled){e.width=this._drawWidth;e.height=this._drawHeight;d.updateViewport(this._drawWidth,this._drawHeight)}if(this.target.filters){d.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight);d.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)}else{if(!d.isCacheControlled){d.getTargetRenderTexture(this.target,this._drawWidth,this._drawHeight)}}};b._drawToCache=function(d){var f=this.target.cacheCanvas;var g=this.target;var e=this._webGLCache;if(e){e.cacheDraw(g,g.filters,this);f=this.target.cacheCanvas;f.width=this._drawWidth;f.height=this._drawHeight}else{var c=f.getContext("2d");if(!d){c.clearRect(0,0,this._drawWidth+1,this._drawHeight+1)}c.save();c.globalCompositeOperation=d;c.setTransform(this.scale,0,0,this.scale,-this._filterOffX,-this._filterOffY);c.translate(-this.x,-this.y);g.draw(c,true);c.restore();if(g.filters&&g.filters.length){this._applyFilters(c)}}f._invalid=true};b._applyFilters=function(e){var d=this.target.filters;var c=this._drawWidth;var j=this._drawHeight;var k;var g=0,f=d[g];do{if(f.usesContext){if(k){e.putImageData(k,0,0);k=null}f.applyFilter(e,0,0,c,j)}else{if(!k){k=e.getImageData(0,0,c,j)}f._applyFilter(k)}f=f._multiPass!==null?f._multiPass:d[++g]}while(f);if(k){e.putImageData(k,0,0)}};createjs.BitmapCache=a}());this.createjs=this.createjs||{};(function(){function c(e,d,f){this.Filter_constructor();this._blurX=e;this._blurXTable=[];this._lastBlurX=null;this._blurY=d;this._blurYTable=[];this._lastBlurY=null;this._quality;this._lastQuality=null;this.FRAG_SHADER_TEMPLATE=("uniform float xWeight[{{blurX}}];uniform float yWeight[{{blurY}}];uniform vec2 textureOffset;void main(void) {vec4 color = vec4(0.0);float xAdj = ({{blurX}}.0-1.0)/2.0;float yAdj = ({{blurY}}.0-1.0)/2.0;vec2 sampleOffset;for(int i=0; i<{{blurX}}; i++) {for(int j=0; j<{{blurY}}; j++) {sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);}}gl_FragColor = color.rgba;}");if(isNaN(f)||f<1){f=1}this.setQuality(f|0)}var b=createjs.extend(c,createjs.Filter);b.getBlurX=function(){return this._blurX};b.getBlurY=function(){return this._blurY};b.setBlurX=function(d){if(isNaN(d)||d<0){d=0}this._blurX=d};b.setBlurY=function(d){if(isNaN(d)||d<0){d=0}this._blurY=d};b.getQuality=function(){return this._quality};b.setQuality=function(d){if(isNaN(d)||d<0){d=0}this._quality=d|0};b._getShader=function(){var d=this._lastBlurX!==this._blurX;var e=this._lastBlurY!==this._blurY;var f=this._lastQuality!==this._quality;if(d||e||f){if(d||f){this._blurXTable=this._getTable(this._blurX*this._quality)}if(e||f){this._blurYTable=this._getTable(this._blurY*this._quality)}this._updateShader();this._lastBlurX=this._blurX;this._lastBlurY=this._blurY;this._lastQuality=this._quality;return undefined}return this._compiledShader};b._setShader=function(){this._compiledShader};try{Object.defineProperties(b,{blurX:{get:b.getBlurX,set:b.setBlurX},blurY:{get:b.getBlurY,set:b.setBlurY},quality:{get:b.getQuality,set:b.setQuality},_builtShader:{get:b._getShader,set:b._setShader}})}catch(a){console.log(a)}b._getTable=function(f){var e=4.2;if(f<=1){return[1]}var k=[];var j=Math.ceil(f*2);j+=(j%2)?0:1;var l=(j/2)|0;for(var h=-l;h<=l;h++){var d=(h/l)*e;k.push(1/Math.sqrt(2*Math.PI)*Math.pow(Math.E,-(Math.pow(d,2)/4)))}var g=k.reduce(function(m,i){return m+i});return k.map(function(m,i,n){return m/g})};b._updateShader=function(){if(this._blurX===undefined||this._blurY===undefined){return}var d=this.FRAG_SHADER_TEMPLATE;d=d.replace(/\{\{blurX\}\}/g,(this._blurXTable.length).toFixed(0));d=d.replace(/\{\{blurY\}\}/g,(this._blurYTable.length).toFixed(0));this.FRAG_SHADER_BODY=d};b.shaderParamSetup=function(e,d,f){e.uniform1fv(e.getUniformLocation(f,"xWeight"),this._blurXTable);e.uniform1fv(e.getUniformLocation(f,"yWeight"),this._blurYTable);e.uniform2f(e.getUniformLocation(f,"textureOffset"),2/(d._viewportWidth*this._quality),2/(d._viewportHeight*this._quality))};c.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1];c.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];b.getBounds=function(e){var d=this.blurX|0,g=this.blurY|0;if(d<=0&&g<=0){return e}var f=Math.pow(this.quality,0.2);return(e||new createjs.Rectangle()).pad(g*f+1,d*f+1,g*f+1,d*f+1)};b.clone=function(){return new c(this.blurX,this.blurY,this.quality)};b.toString=function(){return"[BlurFilter]"};b._applyFilter=function(l){var e=this._blurX>>1;if(isNaN(e)||e<0){return false}var d=this._blurY>>1;if(isNaN(d)||d<0){return false}if(e==0&&d==0){return false}var f=this.quality;if(isNaN(f)||f<1){f=1}f|=0;if(f>3){f=3}if(f<1){f=1}var m=l.data;var M=0,K=0,T=0,P=0,A=0,D=0,z=0,O=0,V=0,W=0,X=0,t=0,C=0,E=0,F=0;var k=(e+e+1)|0;var j=(d+d+1)|0;var N=l.width|0;var U=l.height|0;var J=(N-1)|0;var G=(U-1)|0;var Q=(e+1)|0;var L=(d+1)|0;var S={r:0,b:0,g:0,a:0};var o=S;for(T=1;T<k;T++){o=o.n={r:0,b:0,g:0,a:0}}o.n=S;var R={r:0,b:0,g:0,a:0};var n=R;for(T=1;T<j;T++){n=n.n={r:0,b:0,g:0,a:0}}n.n=R;var B=null;var v=c.MUL_TABLE[e]|0;var I=c.SHG_TABLE[e]|0;var s=c.MUL_TABLE[d]|0;var H=c.SHG_TABLE[d]|0;while(f-->0){z=D=0;var q=v;var u=I;for(K=U;--K>-1;){O=Q*(t=m[(D)|0]);V=Q*(C=m[(D+1)|0]);W=Q*(E=m[(D+2)|0]);X=Q*(F=m[(D+3)|0]);o=S;for(T=Q;--T>-1;){o.r=t;o.g=C;o.b=E;o.a=F;o=o.n}for(T=1;T<Q;T++){P=(D+((J<T?J:T)<<2))|0;O+=(o.r=m[P]);V+=(o.g=m[P+1]);W+=(o.b=m[P+2]);X+=(o.a=m[P+3]);o=o.n}B=S;for(M=0;M<N;M++){m[D++]=(O*q)>>>u;m[D++]=(V*q)>>>u;m[D++]=(W*q)>>>u;m[D++]=(X*q)>>>u;P=((z+((P=M+e+1)<J?P:J))<<2);O-=B.r-(B.r=m[P]);V-=B.g-(B.g=m[P+1]);W-=B.b-(B.b=m[P+2]);X-=B.a-(B.a=m[P+3]);B=B.n}z+=N}q=s;u=H;for(M=0;M<N;M++){D=(M<<2)|0;O=(L*(t=m[D]))|0;V=(L*(C=m[(D+1)|0]))|0;W=(L*(E=m[(D+2)|0]))|0;X=(L*(F=m[(D+3)|0]))|0;n=R;for(T=0;T<L;T++){n.r=t;n.g=C;n.b=E;n.a=F;n=n.n}A=N;for(T=1;T<=d;T++){D=(A+M)<<2;O+=(n.r=m[D]);V+=(n.g=m[D+1]);W+=(n.b=m[D+2]);X+=(n.a=m[D+3]);n=n.n;if(T<G){A+=N}}D=M;B=R;if(f>0){for(K=0;K<U;K++){P=D<<2;m[P+3]=F=(X*q)>>>u;if(F>0){m[P]=((O*q)>>>u);m[P+1]=((V*q)>>>u);m[P+2]=((W*q)>>>u)}else{m[P]=m[P+1]=m[P+2]=0}P=(M+(((P=K+L)<G?P:G)*N))<<2;O-=B.r-(B.r=m[P]);V-=B.g-(B.g=m[P+1]);W-=B.b-(B.b=m[P+2]);X-=B.a-(B.a=m[P+3]);B=B.n;D+=N}}else{for(K=0;K<U;K++){P=D<<2;m[P+3]=F=(X*q)>>>u;if(F>0){F=255/F;m[P]=((O*q)>>>u)*F;m[P+1]=((V*q)>>>u)*F;m[P+2]=((W*q)>>>u)*F}else{m[P]=m[P+1]=m[P+2]=0}P=(M+(((P=K+L)<G?P:G)*N))<<2;O-=B.r-(B.r=m[P]);V-=B.g-(B.g=m[P+1]);W-=B.b-(B.b=m[P+2]);X-=B.a-(B.a=m[P+3]);B=B.n;D+=N}}}}return true};createjs.BlurFilter=createjs.promote(c,"Filter")}());this.createjs=this.createjs||{};(function(){function b(c){this.Filter_constructor();this.alphaMap=c;this._alphaMap=null;this._mapData=null;this._mapTexture=null;this.FRAG_SHADER_BODY=("uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));}")}var a=createjs.extend(b,createjs.Filter);a.shaderParamSetup=function(d,c,e){if(!this._mapTexture){this._mapTexture=d.createTexture()}d.activeTexture(d.TEXTURE1);d.bindTexture(d.TEXTURE_2D,this._mapTexture);c.setTextureParams(d);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,this.alphaMap);d.uniform1i(d.getUniformLocation(e,"uAlphaSampler"),1)};a.clone=function(){var c=new b(this.alphaMap);c._alphaMap=this._alphaMap;c._mapData=this._mapData;return c};a.toString=function(){return"[AlphaMapFilter]"};a._applyFilter=function(g){if(!this.alphaMap){return true}if(!this._prepAlphaMap()){return false}var e=g.data;var f=this._mapData;for(var d=0,c=e.length;d<c;d+=4){e[d+3]=f[d]||0}return true};a._prepAlphaMap=function(){if(!this.alphaMap){return false}if(this.alphaMap==this._alphaMap&&this._mapData){return true}this._mapData=null;var h=this._alphaMap=this.alphaMap;var d=h;var c;if(h instanceof HTMLCanvasElement){c=d.getContext("2d")}else{d=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");d.width=h.width;d.height=h.height;c=d.getContext("2d");c.drawImage(h,0,0)}try{var g=c.getImageData(0,0,h.width,h.height)}catch(f){return false}this._mapData=g.data;return true};createjs.AlphaMapFilter=createjs.promote(b,"Filter")}());this.createjs=this.createjs||{};(function(){function a(c){this.Filter_constructor();this.mask=c;this.usesContext=true;this.FRAG_SHADER_BODY=("uniform sampler2D uAlphaSampler;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);}")}var b=createjs.extend(a,createjs.Filter);b.shaderParamSetup=function(d,c,e){if(!this._mapTexture){this._mapTexture=d.createTexture()}d.activeTexture(d.TEXTURE1);d.bindTexture(d.TEXTURE_2D,this._mapTexture);c.setTextureParams(d);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,this.mask);d.uniform1i(d.getUniformLocation(e,"uAlphaSampler"),1)};b.applyFilter=function(e,c,j,g,h,i,d,f){if(!this.mask){return true}i=i||e;if(d==null){d=c}if(f==null){f=j}i.save();if(e!=i){return false}i.globalCompositeOperation="destination-in";i.drawImage(this.mask,d,f);i.restore();return true};b.clone=function(){return new a(this.mask)};b.toString=function(){return"[AlphaMaskFilter]"};createjs.AlphaMaskFilter=createjs.promote(a,"Filter")}());this.createjs=this.createjs||{};(function(){function a(c,h,j,g,i,f,e,d){this.Filter_constructor();this.redMultiplier=c!=null?c:1;this.greenMultiplier=h!=null?h:1;this.blueMultiplier=j!=null?j:1;this.alphaMultiplier=g!=null?g:1;this.redOffset=i||0;this.greenOffset=f||0;this.blueOffset=e||0;this.alphaOffset=d||0;this.FRAG_SHADER_BODY=("uniform vec4 uColorMultiplier;uniform vec4 uColorOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);gl_FragColor = (color * uColorMultiplier) + uColorOffset;}")}var b=createjs.extend(a,createjs.Filter);b.shaderParamSetup=function(d,c,e){d.uniform4f(d.getUniformLocation(e,"uColorMultiplier"),this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier);d.uniform4f(d.getUniformLocation(e,"uColorOffset"),this.redOffset/255,this.greenOffset/255,this.blueOffset/255,this.alphaOffset/255)};b.toString=function(){return"[ColorFilter]"};b.clone=function(){return new a(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)};b._applyFilter=function(f){var e=f.data;var c=e.length;for(var d=0;d<c;d+=4){e[d]=e[d]*this.redMultiplier+this.redOffset;e[d+1]=e[d+1]*this.greenMultiplier+this.greenOffset;e[d+2]=e[d+2]*this.blueMultiplier+this.blueOffset;e[d+3]=e[d+3]*this.alphaMultiplier+this.alphaOffset}return true};createjs.ColorFilter=createjs.promote(a,"Filter")}());this.createjs=this.createjs||{};(function(){function a(f,e,c,d){this.setColor(f,e,c,d)}var b=a.prototype;a.DELTA_INDEX=[0,0.01,0.02,0.04,0.05,0.06,0.07,0.08,0.1,0.11,0.12,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.25,0.27,0.28,0.3,0.32,0.34,0.36,0.38,0.4,0.42,0.44,0.46,0.48,0.5,0.53,0.56,0.59,0.62,0.65,0.68,0.71,0.74,0.77,0.8,0.83,0.86,0.89,0.92,0.95,0.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];a.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1];a.LENGTH=a.IDENTITY_MATRIX.length;b.setColor=function(f,e,c,d){return this.reset().adjustColor(f,e,c,d)};b.reset=function(){return this.copy(a.IDENTITY_MATRIX)};b.adjustColor=function(f,e,c,d){this.adjustHue(d);this.adjustContrast(e);this.adjustBrightness(f);return this.adjustSaturation(c)};b.adjustBrightness=function(c){if(c==0||isNaN(c)){return this}c=this._cleanValue(c,255);this._multiplyMatrix([1,0,0,0,c,0,1,0,0,c,0,0,1,0,c,0,0,0,1,0,0,0,0,0,1]);return this};b.adjustContrast=function(d){if(d==0||isNaN(d)){return this}d=this._cleanValue(d,100);var c;if(d<0){c=127+d/100*127}else{c=d%1;if(c==0){c=a.DELTA_INDEX[d]}else{c=a.DELTA_INDEX[(d<<0)]*(1-c)+a.DELTA_INDEX[(d<<0)+1]*c}c=c*127+127}this._multiplyMatrix([c/127,0,0,0,0.5*(127-c),0,c/127,0,0,0.5*(127-c),0,0,c/127,0,0.5*(127-c),0,0,0,1,0,0,0,0,0,1]);return this};b.adjustSaturation=function(f){if(f==0||isNaN(f)){return this}f=this._cleanValue(f,100);var c=1+((f>0)?3*f/100:f/100);var e=0.3086;var d=0.6094;var g=0.082;this._multiplyMatrix([e*(1-c)+c,d*(1-c),g*(1-c),0,0,e*(1-c),d*(1-c)+c,g*(1-c),0,0,e*(1-c),d*(1-c),g*(1-c)+c,0,0,0,0,0,1,0,0,0,0,0,1]);return this};b.adjustHue=function(f){if(f==0||isNaN(f)){return this}f=this._cleanValue(f,180)/180*Math.PI;var h=Math.cos(f);var c=Math.sin(f);var e=0.213;var d=0.715;var g=0.072;this._multiplyMatrix([e+h*(1-e)+c*(-e),d+h*(-d)+c*(-d),g+h*(-g)+c*(1-g),0,0,e+h*(-e)+c*(0.143),d+h*(1-d)+c*(0.14),g+h*(-g)+c*(-0.283),0,0,e+h*(-e)+c*(-(1-e)),d+h*(-d)+c*(d),g+h*(1-g)+c*(g),0,0,0,0,0,1,0,0,0,0,0,1]);return this};b.concat=function(c){c=this._fixMatrix(c);if(c.length!=a.LENGTH){return this}this._multiplyMatrix(c);return this};b.clone=function(){return(new a()).copy(this)};b.toArray=function(){var c=[];for(var e=0,d=a.LENGTH;e<d;e++){c[e]=this[e]}return c};b.copy=function(e){var c=a.LENGTH;for(var d=0;d<c;d++){this[d]=e[d]}return this};b.toString=function(){return"[ColorMatrix]"};b._multiplyMatrix=function(g){var f,e,c,d=[];for(f=0;f<5;f++){for(e=0;e<5;e++){d[e]=this[e+f*5]}for(e=0;e<5;e++){var h=0;for(c=0;c<5;c++){h+=g[e+c*5]*d[c]}this[e+f*5]=h}}};b._cleanValue=function(d,c){return Math.min(c,Math.max(-c,d))};b._fixMatrix=function(c){if(c instanceof a){c=c.toArray()}if(c.length<a.LENGTH){c=c.slice(0,c.length).concat(a.IDENTITY_MATRIX.slice(c.length,a.LENGTH))}else{if(c.length>a.LENGTH){c=c.slice(0,a.LENGTH)}}return c};createjs.ColorMatrix=a}());this.createjs=this.createjs||{};(function(){function a(c){this.Filter_constructor();this.matrix=c;this.FRAG_SHADER_BODY=("uniform mat4 uColorMatrix;uniform vec4 uColorMatrixOffset;void main(void) {vec4 color = texture2D(uSampler, vRenderCoord);mat4 m = uColorMatrix;vec4 newColor = vec4(0,0,0,0);newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];gl_FragColor = newColor + uColorMatrixOffset;}")}var b=createjs.extend(a,createjs.Filter);b.shaderParamSetup=function(f,d,g){var e=this.matrix;var c=new Float32Array([e[0],e[1],e[2],e[3],e[5],e[6],e[7],e[8],e[10],e[11],e[12],e[13],e[15],e[16],e[17],e[18]]);f.uniformMatrix4fv(f.getUniformLocation(g,"uColorMatrix"),false,c);f.uniform4f(f.getUniformLocation(g,"uColorMatrixOffset"),e[4]/255,e[9]/255,e[14]/255,e[19]/255)};b.toString=function(){return"[ColorMatrixFilter]"};b.clone=function(){return new a(this.matrix)};b._applyFilter=function(m){var G=m.data;var k=G.length;var j,s,A,D;var h=this.matrix;var f=h[0],e=h[1],d=h[2],c=h[3],I=h[4];var H=h[5],F=h[6],C=h[7],z=h[8],x=h[9];var E=h[10],B=h[11],y=h[12],w=h[13],v=h[14];var u=h[15],t=h[16],q=h[17],p=h[18],o=h[19];for(var n=0;n<k;n+=4){j=G[n];s=G[n+1];A=G[n+2];D=G[n+3];G[n]=j*f+s*e+A*d+D*c+I;G[n+1]=j*H+s*F+A*C+D*z+x;G[n+2]=j*E+s*B+A*y+D*w+v;G[n+3]=j*u+s*t+A*q+D*p+o}return true};createjs.ColorMatrixFilter=createjs.promote(a,"Filter")}());this.createjs=this.createjs||{};(function(){function a(){throw"Touch cannot be instantiated"}a.isSupported=function(){return !!(("ontouchstart" in window)||(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0)||(window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0))};a.enable=function(d,c,b){if(!d||!d.canvas||!a.isSupported()){return false}if(d.__touch){return true}d.__touch={pointers:{},multitouch:!c,preventDefault:!b,count:0};if("ontouchstart" in window){a._IOS_enable(d)}else{if(window.navigator.msPointerEnabled||window.navigator.pointerEnabled){a._IE_enable(d)}}return true};a.disable=function(b){if(!b){return}if("ontouchstart" in window){a._IOS_disable(b)}else{if(window.navigator.msPointerEnabled||window.navigator.pointerEnabled){a._IE_disable(b)}}delete b.__touch};a._IOS_enable=function(b){var c=b.canvas;var d=b.__touch.f=function(f){a._IOS_handleEvent(b,f)};c.addEventListener("touchstart",d,false);c.addEventListener("touchmove",d,false);c.addEventListener("touchend",d,false);c.addEventListener("touchcancel",d,false)};a._IOS_disable=function(b){var c=b.canvas;if(!c){return}var d=b.__touch.f;c.removeEventListener("touchstart",d,false);c.removeEventListener("touchmove",d,false);c.removeEventListener("touchend",d,false);c.removeEventListener("touchcancel",d,false)};a._IOS_handleEvent=function(c,g){if(!c){return}if(c.__touch.preventDefault){g.preventDefault&&g.preventDefault()}var k=g.changedTouches;var f=g.type;for(var d=0,b=k.length;d<b;d++){var j=k[d];var h=j.identifier;if(j.target!=c.canvas){continue}if(f=="touchstart"){this._handleStart(c,h,g,j.pageX,j.pageY)}else{if(f=="touchmove"){this._handleMove(c,h,g,j.pageX,j.pageY)}else{if(f=="touchend"||f=="touchcancel"){this._handleEnd(c,h,g)}}}}};a._IE_enable=function(b){var c=b.canvas;var d=b.__touch.f=function(f){a._IE_handleEvent(b,f)};if(window.navigator.pointerEnabled===undefined){c.addEventListener("MSPointerDown",d,false);window.addEventListener("MSPointerMove",d,false);window.addEventListener("MSPointerUp",d,false);window.addEventListener("MSPointerCancel",d,false);if(b.__touch.preventDefault){c.style.msTouchAction="none"}}else{c.addEventListener("pointerdown",d,false);window.addEventListener("pointermove",d,false);window.addEventListener("pointerup",d,false);window.addEventListener("pointercancel",d,false);if(b.__touch.preventDefault){c.style.touchAction="none"}}b.__touch.activeIDs={}};a._IE_disable=function(b){var c=b.__touch.f;if(window.navigator.pointerEnabled===undefined){window.removeEventListener("MSPointerMove",c,false);window.removeEventListener("MSPointerUp",c,false);window.removeEventListener("MSPointerCancel",c,false);if(b.canvas){b.canvas.removeEventListener("MSPointerDown",c,false)}}else{window.removeEventListener("pointermove",c,false);window.removeEventListener("pointerup",c,false);window.removeEventListener("pointercancel",c,false);if(b.canvas){b.canvas.removeEventListener("pointerdown",c,false)}}};a._IE_handleEvent=function(b,f){if(!b){return}if(b.__touch.preventDefault){f.preventDefault&&f.preventDefault()}var d=f.type;var g=f.pointerId;var c=b.__touch.activeIDs;if(d=="MSPointerDown"||d=="pointerdown"){if(f.srcElement!=b.canvas){return}c[g]=true;this._handleStart(b,g,f,f.pageX,f.pageY)}else{if(c[g]){if(d=="MSPointerMove"||d=="pointermove"){this._handleMove(b,g,f,f.pageX,f.pageY)}else{if(d=="MSPointerUp"||d=="MSPointerCancel"||d=="pointerup"||d=="pointercancel"){delete (c[g]);this._handleEnd(b,g,f)}}}}};a._handleStart=function(c,i,g,b,h){var f=c.__touch;if(!f.multitouch&&f.count){return}var d=f.pointers;if(d[i]){return}d[i]=true;f.count++;c._handlePointerDown(i,g,b,h)};a._handleMove=function(c,g,d,b,f){if(!c.__touch.pointers[g]){return}c._handlePointerMove(g,d,b,f)};a._handleEnd=function(b,g,f){var d=b.__touch;var c=d.pointers;if(!c[g]){return}d.count--;b._handlePointerUp(g,f,true);delete (c[g])};createjs.Touch=a}());this.createjs=this.createjs||{};(function(){var a=createjs.EaselJS=createjs.EaselJS||{};a.version="NEXT";a.buildDate="Mon, 17 Jul 2017 17:06:39 GMT"})();